{"ast":null,"code":"import _classCallCheck from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Button from'@material-ui/core/Button';import HeaderCitoyen from'./HeaderCitoyen';import history from'./history';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Plainte=/*#__PURE__*/function(_Component){_inherits(Plainte,_Component);var _super=_createSuper(Plainte);function Plainte(props){var _this;_classCallCheck(this,Plainte);_this=_super.call(this,props);_this.state={textareaVal:\"\",idCitoyen:1};_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Plainte,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Recuperer les informations de citoyen.\nvar url=\"http://localhost:8080/Web-Project/project/GetLoginId/\"+this.props.location.state.id;fetch(url).then(function(res){return res.json();}).then(function(data){console.log(data);_this2.setState({idCitoyen:data[0][\"idLogin\"]});},// Remarque : il est important de traiter les erreurs ici\n// au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n// des exceptions provenant de réels bugs du composant.\nfunction(error){});}},{key:\"handleClick\",value:function handleClick(event,id){var question=this.state.textareaVal;var url=\"http://localhost:8080/Web-Project/project/AddQuestion\";history.goBack();fetch(url,{method:\"POST\",headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({citoyen:{id:this.state.idCitoyen},question:question,reponse:\"\",estTraite:\"false\"})});}},{key:\"handleChange\",value:function handleChange(event){this.setState({textareaVal:event.target.value});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HeaderCitoyen,{id:this.props.location.state.id}),/*#__PURE__*/_jsx(\"hr\",{className:\"overall-separator\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h2\",{className:\"question-title\",children:\" Poser une question \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"reponse-textfield\",children:[/*#__PURE__*/_jsx(\"textarea\",{ref:\"myTextarea\",value:this.state.textareaVal,onChange:function onChange(e){return _this3.handleChange(e);},rows:\"10\",cols:\"100\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"separate-demandes\"}),/*#__PURE__*/_jsx(Button,{className:\"envoyer-response\",variant:\"contained\",color:\"default\",onClick:function onClick(e){return _this3.handleClick(e,_this3.props.location.state.id);},children:\"Envoyer\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"end\",children:/*#__PURE__*/_jsxs(\"center\",{children:[\"Copyright \",/*#__PURE__*/_jsx(\"span\",{children:\"\\xA9\"}),\" 2021 tous les droits r\\xE9s\\xE9rv\\xE9s.\"]})})]});}}]);return Plainte;}(Component);export default Plainte;","map":{"version":3,"sources":["/Users/badrsajid/Desktop/MonCitoyen/Front-End/src/Plainte.js"],"names":["React","Component","Button","HeaderCitoyen","history","Plainte","props","state","textareaVal","idCitoyen","handleClick","bind","handleChange","url","location","id","fetch","then","res","json","data","console","log","setState","error","event","question","goBack","method","headers","body","JSON","stringify","citoyen","reponse","estTraite","target","value","e"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport HeaderCitoyen from './HeaderCitoyen';\nimport history from './history';\n\n\n\nclass Plainte extends Component {\n\n\n\n    constructor(props) {\n        super(props);\n        this.state = {textareaVal: \"\", idCitoyen: 1};\n        this.handleClick = this.handleClick.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n\n    componentDidMount(){\n        // Recuperer les informations de citoyen.\n        const url = \"http://localhost:8080/Web-Project/project/GetLoginId/\"+this.props.location.state.id;\n        fetch(url)\n        .then(res => res.json())\n        .then(\n        (data) => {\n          console.log(data);\n          this.setState({idCitoyen: data[0][\"idLogin\"]});\n        },\n        // Remarque : il est important de traiter les erreurs ici\n        // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n        // des exceptions provenant de réels bugs du composant.\n        (error) => {\n\n        }\n        )\n\n    }\n\n    handleClick(event, id)  {\n        const question = this.state.textareaVal;\n        const url = \"http://localhost:8080/Web-Project/project/AddQuestion\";\n        history.goBack();\n        fetch(url, {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                citoyen: {id: this.state.idCitoyen},\n                question: question,\n                reponse: \"\",\n                estTraite: \"false\"\n            })\n        })\n    }\n\n    handleChange(event) {\n        this.setState({textareaVal: event.target.value});\n    }\n\n\n    render() {\n        return (\n            <div>\n                <HeaderCitoyen id={this.props.location.state.id}/>\n                <hr className=\"overall-separator\" />\n                <br></br>\n\n\n                <h2 className=\"question-title\"> Poser une question </h2>\n                <br></br>\n                <div className=\"reponse-textfield\">\n                    <textarea ref='myTextarea' value={this.state.textareaVal} onChange={(e) => this.handleChange(e)} rows=\"10\" cols=\"100\">\n                    </textarea>\n                    <hr className=\"separate-demandes\"></hr>\n                    <Button className=\"envoyer-response\" variant=\"contained\" color=\"default\" onClick={(e) => this.handleClick(e,this.props.location.state.id)}>Envoyer</Button>\n                </div>\n\n                        \n                <br></br>\n                <div className=\"end\">\n                    <center>Copyright <span>&#169;</span> 2021 tous les droits résérvés.</center>\n                </div>\n\n\n\n            </div>\n        )\n    }\n    \n}\n\n  \nexport default Plainte;"]},"metadata":{},"sourceType":"module"}