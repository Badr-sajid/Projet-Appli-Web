{"ast":null,"code":"import _classCallCheck from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import'./auth-css/auth.css';import{Redirect}from'react-router';import history from'./history';import{withRouter}from\"react-router-dom\";import axios from'axios';import testUtils from\"react-dom/test-utils\";import Header from'./Header';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={email:\"\",mdp:\"\",isLogged:\"\"};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"handleSubmit\",value:function handleSubmit(event){var _this2=this;event.preventDefault();var url=\"http://localhost:8080/Web-Project/project/verification/\"+this.state.email+\"/\"+this.state.mdp;var success=fetch(url,{method:\"get\",headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){if(data){_this2.setState({isLogged:\"true\"});}else{_this2.setState({isLogged:\"false\"});}if(_this2.state.isLogged==\"true\"&&_this2.state.email!=\"admin@gmail.com\"){history.push({pathname:\"/HomeCitoyen\",state:{id:_this2.state.email}});}else if(_this2.state.isLogged==\"true\"&&_this2.state.email==\"admin@gmail.com\"){history.push({pathname:\"/HomeFonctionnaire\",state:{id:_this2.state.email}});}else{history.push(\"/LoginError\");}});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"hr\",{className:\"overall-separator\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"connexion\",children:\"Connexion\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Adresse E-mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",onChange:function onChange(e){_this3.setState({email:e.target.value});},className:\"form-control\",placeholder:\"Entrer votre e-mail\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Mot de passe\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:function onChange(e){_this3.setState({mdp:e.target.value});},className:\"form-control\",placeholder:\"Entrer votre mot de passe\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn   btn-primary btn-block\",children:\"Connexion\"}),/*#__PURE__*/_jsx(\"p\",{className:\"bottom-text text-right\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\" Mot de passe oubli\\xE9 ?\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"bottom-text text-left\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\" Inscription\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"end\",children:/*#__PURE__*/_jsxs(\"center\",{children:[\"Copyright \",/*#__PURE__*/_jsx(\"span\",{children:\"\\xA9\"}),\" 2021 tous les droits r\\xE9s\\xE9rv\\xE9s.\"]})})]});}}]);return Login;}(Component);export default withRouter(Login);","map":{"version":3,"sources":["/Users/badrsajid/Desktop/MonCitoyen/Front-End/src/login.component.js"],"names":["React","Component","Redirect","history","withRouter","axios","testUtils","Header","Login","props","state","email","mdp","isLogged","handleSubmit","bind","event","preventDefault","url","success","fetch","method","headers","then","response","json","data","setState","push","pathname","id","e","target","value"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport './auth-css/auth.css';\r\nimport { Redirect } from 'react-router';\r\nimport history from './history';\r\nimport { withRouter } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport testUtils from \"react-dom/test-utils\";\r\nimport Header from './Header';\r\n\r\nclass Login extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state ={\r\n            email:\"\",\r\n            mdp:\"\",\r\n            isLogged:\"\"\r\n        }\r\n        this.handleSubmit = this.handleSubmit.bind(this)\r\n    }\r\n\r\n\r\n    handleSubmit(event){\r\n        event.preventDefault();\r\n        const url = \"http://localhost:8080/Web-Project/project/verification/\"+this.state.email+\"/\"+this.state.mdp;\r\n        const success = fetch(url, {\r\n        method: \"get\",\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        })\r\n        .then( (response) => response.json())\r\n        .then( (data) =>{\r\n            if (data)  {\r\n                this.setState({isLogged: \"true\"});\r\n            } else {\r\n                this.setState({isLogged: \"false\"})\r\n            }\r\n            if (this.state.isLogged == \"true\" && this.state.email != \"admin@gmail.com\") {\r\n                history.push({pathname: \"/HomeCitoyen\",\r\n                                state: {id: this.state.email}})\r\n            } else if (this.state.isLogged == \"true\" && this.state.email == \"admin@gmail.com\") {\r\n                history.push({pathname: \"/HomeFonctionnaire\",\r\n                state: {id: this.state.email}})\r\n            } else {\r\n                history.push(\"/LoginError\");\r\n            }\r\n        \r\n         });\r\n\r\n    }\r\n\r\n\r\n    render(){\r\n        return(\r\n         <div>\r\n                <Header />\r\n                <hr className=\"overall-separator\" />\r\n\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <h3 className=\"connexion\">Connexion</h3>\r\n                    <div className=\"form-group\">\r\n                        <label>Adresse E-mail</label>\r\n                        <input type=\"email\" onChange={(e) => {this.setState({email: e.target.value})}}  className=\"form-control\" placeholder=\"Entrer votre e-mail\"/>\r\n                    </div>\r\n                    <br></br>\r\n                    <div className=\"form-group\">\r\n                        <label>Mot de passe</label>\r\n                        <input type=\"password\" onChange={(e) => {this.setState({mdp: e.target.value})}}  className=\"form-control\" placeholder=\"Entrer votre mot de passe\"/>\r\n                    </div>\r\n                    <br></br>\r\n                    <button type=\"submit\" className=\"btn   btn-primary btn-block\">Connexion</button>\r\n                    <p className=\"bottom-text text-right\">\r\n                        <a href=\"#\"> Mot de passe oublié ?</a>\r\n                    </p>\r\n                    <p className=\"bottom-text text-left\">\r\n                        <a href=\"/signup\"> Inscription</a>\r\n                    </p>\r\n                </form>\r\n\r\n\r\n                <br></br>\r\n                <div className=\"end\">\r\n                <center>Copyright <span>&#169;</span> 2021 tous les droits résérvés.</center>\r\n                </div>\r\n\r\n        </div>   \r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(Login);"]},"metadata":{},"sourceType":"module"}