{"ast":null,"code":"import _classCallCheck from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import'./auth-css/auth.css';import HeaderCitoyen from'./HeaderCitoyen';import history from'./history';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UploadCV=/*#__PURE__*/function(_Component){_inherits(UploadCV,_Component);var _super=_createSuper(UploadCV);function UploadCV(props){var _this;_classCallCheck(this,UploadCV);_this=_super.call(this,props);_this.state={filenames:[],disable:false,idCandidature:0};_this.onFileChange=_this.onFileChange.bind(_assertThisInitialized(_this));_this.onButtonClick=_this.onButtonClick.bind(_assertThisInitialized(_this));return _this;}_createClass(UploadCV,[{key:\"onButtonClick\",value:function onButtonClick(){history.push({pathname:\"/HomeCitoyen\",state:{id:this.props.location.state.id}});}},{key:\"onFileChange\",value:function onFileChange(event){var _this2=this;var idOffre=this.props.location.state.idOffre;var idCitoyen=this.props.location.state.idCitoyen;console.log(idOffre);console.log(idCitoyen);var url=\"http://localhost:8080/Web-Project/project/GetCandidatureIdByIdOffre/\"+idOffre+\"/\"+idCitoyen;fetch(url).then(function(res){return res.json();}).then(function(data){console.log(data);if(Array.from(event.target.files).length!=1){event.preventDefault();alert(\"Il faut t\\xE9l\\xE9charger un seul document qui est le CV\");return;}var fileName=_this2.props.location.state.id+\"-\"+event.target.files[0].name;var url2=\"http://localhost:8080/Web-Project/project/AddCVCandidature/\"+data+\"/\"+fileName;fetch(url2,{method:\"put\",headers:{'Accept':'application/json','Content-Type':'application/json'}});});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HeaderCitoyen,{id:this.props.location.state.id}),/*#__PURE__*/_jsx(\"hr\",{className:\"overall-separator\"}),/*#__PURE__*/_jsx(\"h1\",{class:\"UploadCarteSejourH1\",children:\"T\\xE9l\\xE9charger votre CV\"}),/*#__PURE__*/_jsx(\"form\",{method:\"POST\",action:\"http://localhost:8080/Web-Project/Upload\",enctype:\"multipart/form-data\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{class:\"upload-file\",type:\"file\",name:\"file\",multiple:true,onChange:this.onFileChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"id\",value:this.props.location.state.id,hidden:true})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",name:\"submit\",className:\"btn   btn-primary btn-block btn-upload\",value:\"Envoyer la candidature\"})]})})]});}}]);return UploadCV;}(Component);export default UploadCV;","map":{"version":3,"sources":["/Users/badrsajid/Desktop/MonCitoyen/Front-End/src/UploadCV.js"],"names":["React","Component","HeaderCitoyen","history","UploadCV","props","state","filenames","disable","idCandidature","onFileChange","bind","onButtonClick","push","pathname","id","location","event","idOffre","idCitoyen","console","log","url","fetch","then","res","json","data","Array","from","target","files","length","preventDefault","alert","fileName","name","url2","method","headers"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport './auth-css/auth.css';\nimport HeaderCitoyen from './HeaderCitoyen';\nimport history from './history';\n\nclass UploadCV extends Component {\n    constructor(props){\n        super(props);\n        this.state ={\n            filenames:[],\n           disable:false,\n           idCandidature: 0\n        }\n        this.onFileChange = this.onFileChange.bind(this);\n        this.onButtonClick = this.onButtonClick.bind(this);\n    }\n    onButtonClick(){\n        history.push({pathname: \"/HomeCitoyen\",\n        state: {id: this.props.location.state.id}});\n    }\n    onFileChange(event){\n        const idOffre = this.props.location.state.idOffre;\n        const idCitoyen = this.props.location.state.idCitoyen;\n        console.log(idOffre);\n        console.log(idCitoyen);\n        const url = \"http://localhost:8080/Web-Project/project/GetCandidatureIdByIdOffre/\"+idOffre+\"/\"+idCitoyen;\n        fetch(url).then(res => res.json()).then((data) => { console.log(data);\n            if (Array.from(event.target.files).length != 1) {\n                event.preventDefault();\n                alert(`Il faut télécharger un seul document qui est le CV`);\n                return;\n            }\n            const fileName = this.props.location.state.id+\"-\"+event.target.files[0].name;\n            const url2 = \"http://localhost:8080/Web-Project/project/AddCVCandidature/\"+data+\"/\"+fileName;\n    \n            fetch(url2, {\n                method: \"put\",\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json'\n                }\n                })});\n\n\n    }\n    render() {\n      return (\n          <div>\n              <HeaderCitoyen id={this.props.location.state.id} />\n              <hr className=\"overall-separator\"/>\n              <h1 class=\"UploadCarteSejourH1\" >Télécharger votre CV</h1>\n              <form method=\"POST\" action=\"http://localhost:8080/Web-Project/Upload\" enctype=\"multipart/form-data\">\n                <table>\n                    <div className=\"form-group\">\n                        <br></br>\n                        <input class =\"upload-file\" type=\"file\" name=\"file\" multiple onChange={this.onFileChange}/>\n                        <input type=\"text\" name=\"id\" value={this.props.location.state.id} hidden/>\n                    </div>\n                    <br></br>\n                    <br></br>\n                    <input type=\"submit\" name=\"submit\" className=\"btn   btn-primary btn-block btn-upload\" value=\"Envoyer la candidature\" />\n                </table>\n            </form>\n          </div>\n\n      )\n    }\n  }\n  export default UploadCV;"]},"metadata":{},"sourceType":"module"}