{"ast":null,"code":"var _jsxFileName = \"/Users/badrsajid/Desktop/MonCitoyen/Front-End/src/UploadCV.js\";\nimport React, { Component } from \"react\";\nimport './auth-css/auth.css';\nimport HeaderCitoyen from './HeaderCitoyen';\nimport history from './history';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass UploadCV extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filenames: [],\n      disable: false,\n      idCandidature: 0\n    };\n    this.onFileChange = this.onFileChange.bind(this);\n    this.onButtonClick = this.onButtonClick.bind(this);\n  }\n\n  onButtonClick() {\n    history.push({\n      pathname: \"/HomeCitoyen\",\n      state: {\n        id: this.props.location.state.id\n      }\n    });\n  }\n\n  onFileChange(event) {\n    const idOffre = this.props.location.state.idOffre;\n    const idCitoyen = this.props.location.state.idCitoyen;\n    console.log(idOffre);\n    console.log(idCitoyen);\n    const url = \"http://localhost:8080/Web-Project/project/GetCandidatureIdByIdOffre/\" + idOffre + \"/\" + idCitoyen;\n    fetch(url).then(res => res.json()).then(data => {\n      console.log(data);\n\n      if (Array.from(event.target.files).length != 1) {\n        event.preventDefault();\n        alert(`Il faut télécharger un seul document qui est le CV`);\n        return;\n      }\n\n      const fileName = this.props.location.state.id + \"-\" + event.target.files[0].name;\n      const url2 = \"http://localhost:8080/Web-Project/project/AddCVCandidature/\" + data + \"/\" + fileName;\n      fetch(url2, {\n        method: \"put\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(HeaderCitoyen, {\n        id: this.props.location.state.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        className: \"overall-separator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        class: \"UploadCarteSejourH1\",\n        children: \"T\\xE9l\\xE9charger votre CV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        method: \"POST\",\n        action: \"http://localhost:8080/Web-Project/Upload\",\n        enctype: \"multipart/form-data\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              class: \"upload-file\",\n              type: \"file\",\n              name: \"file\",\n              multiple: true,\n              onChange: this.onFileChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"id\",\n              value: this.props.location.state.id,\n              hidden: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            name: \"submit\",\n            className: \"btn   btn-primary btn-block btn-upload\",\n            value: \"Envoyer la candidature\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nexport default UploadCV;","map":{"version":3,"sources":["/Users/badrsajid/Desktop/MonCitoyen/Front-End/src/UploadCV.js"],"names":["React","Component","HeaderCitoyen","history","UploadCV","constructor","props","state","filenames","disable","idCandidature","onFileChange","bind","onButtonClick","push","pathname","id","location","event","idOffre","idCitoyen","console","log","url","fetch","then","res","json","data","Array","from","target","files","length","preventDefault","alert","fileName","name","url2","method","headers","render"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAO,qBAAP;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,OAAP,MAAoB,WAApB;;;AAEA,MAAMC,QAAN,SAAuBH,SAAvB,CAAiC;AAC7BI,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAY;AACRC,MAAAA,SAAS,EAAC,EADF;AAETC,MAAAA,OAAO,EAAC,KAFC;AAGTC,MAAAA,aAAa,EAAE;AAHN,KAAZ;AAKA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBD,IAAnB,CAAwB,IAAxB,CAArB;AACH;;AACDC,EAAAA,aAAa,GAAE;AACXV,IAAAA,OAAO,CAACW,IAAR,CAAa;AAACC,MAAAA,QAAQ,EAAE,cAAX;AACbR,MAAAA,KAAK,EAAE;AAACS,QAAAA,EAAE,EAAE,KAAKV,KAAL,CAAWW,QAAX,CAAoBV,KAApB,CAA0BS;AAA/B;AADM,KAAb;AAEH;;AACDL,EAAAA,YAAY,CAACO,KAAD,EAAO;AACf,UAAMC,OAAO,GAAG,KAAKb,KAAL,CAAWW,QAAX,CAAoBV,KAApB,CAA0BY,OAA1C;AACA,UAAMC,SAAS,GAAG,KAAKd,KAAL,CAAWW,QAAX,CAAoBV,KAApB,CAA0Ba,SAA5C;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYF,SAAZ;AACA,UAAMG,GAAG,GAAG,yEAAuEJ,OAAvE,GAA+E,GAA/E,GAAmFC,SAA/F;AACAI,IAAAA,KAAK,CAACD,GAAD,CAAL,CAAWE,IAAX,CAAgBC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAAvB,EAAmCF,IAAnC,CAAyCG,IAAD,IAAU;AAAEP,MAAAA,OAAO,CAACC,GAAR,CAAYM,IAAZ;;AAChD,UAAIC,KAAK,CAACC,IAAN,CAAWZ,KAAK,CAACa,MAAN,CAAaC,KAAxB,EAA+BC,MAA/B,IAAyC,CAA7C,EAAgD;AAC5Cf,QAAAA,KAAK,CAACgB,cAAN;AACAC,QAAAA,KAAK,CAAE,oDAAF,CAAL;AACA;AACH;;AACD,YAAMC,QAAQ,GAAG,KAAK9B,KAAL,CAAWW,QAAX,CAAoBV,KAApB,CAA0BS,EAA1B,GAA6B,GAA7B,GAAiCE,KAAK,CAACa,MAAN,CAAaC,KAAb,CAAmB,CAAnB,EAAsBK,IAAxE;AACA,YAAMC,IAAI,GAAG,gEAA8DV,IAA9D,GAAmE,GAAnE,GAAuEQ,QAApF;AAEAZ,MAAAA,KAAK,CAACc,IAAD,EAAO;AACRC,QAAAA,MAAM,EAAE,KADA;AAERC,QAAAA,OAAO,EAAE;AACP,oBAAU,kBADH;AAEP,0BAAgB;AAFT;AAFD,OAAP,CAAL;AAMO,KAfX;AAkBH;;AACDC,EAAAA,MAAM,GAAG;AACP,wBACI;AAAA,8BACI,QAAC,aAAD;AAAe,QAAA,EAAE,EAAE,KAAKnC,KAAL,CAAWW,QAAX,CAAoBV,KAApB,CAA0BS;AAA7C;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAI,QAAA,SAAS,EAAC;AAAd;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI;AAAI,QAAA,KAAK,EAAC,qBAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ,eAII;AAAM,QAAA,MAAM,EAAC,MAAb;AAAoB,QAAA,MAAM,EAAC,0CAA3B;AAAsE,QAAA,OAAO,EAAC,qBAA9E;AAAA,+BACE;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAO,cAAA,KAAK,EAAE,aAAd;AAA4B,cAAA,IAAI,EAAC,MAAjC;AAAwC,cAAA,IAAI,EAAC,MAA7C;AAAoD,cAAA,QAAQ,MAA5D;AAA6D,cAAA,QAAQ,EAAE,KAAKL;AAA5E;AAAA;AAAA;AAAA;AAAA,oBAFJ,eAGI;AAAO,cAAA,IAAI,EAAC,MAAZ;AAAmB,cAAA,IAAI,EAAC,IAAxB;AAA6B,cAAA,KAAK,EAAE,KAAKL,KAAL,CAAWW,QAAX,CAAoBV,KAApB,CAA0BS,EAA9D;AAAkE,cAAA,MAAM;AAAxE;AAAA;AAAA;AAAA;AAAA,oBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAMI;AAAA;AAAA;AAAA;AAAA,kBANJ,eAOI;AAAA;AAAA;AAAA;AAAA,kBAPJ,eAQI;AAAO,YAAA,IAAI,EAAC,QAAZ;AAAqB,YAAA,IAAI,EAAC,QAA1B;AAAmC,YAAA,SAAS,EAAC,wCAA7C;AAAsF,YAAA,KAAK,EAAC;AAA5F;AAAA;AAAA;AAAA;AAAA,kBARJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAoBD;;AA7D4B;;AA+D/B,eAAeZ,QAAf","sourcesContent":["import React, {Component} from \"react\";\nimport './auth-css/auth.css';\nimport HeaderCitoyen from './HeaderCitoyen';\nimport history from './history';\n\nclass UploadCV extends Component {\n    constructor(props){\n        super(props);\n        this.state ={\n            filenames:[],\n           disable:false,\n           idCandidature: 0\n        }\n        this.onFileChange = this.onFileChange.bind(this);\n        this.onButtonClick = this.onButtonClick.bind(this);\n    }\n    onButtonClick(){\n        history.push({pathname: \"/HomeCitoyen\",\n        state: {id: this.props.location.state.id}});\n    }\n    onFileChange(event){\n        const idOffre = this.props.location.state.idOffre;\n        const idCitoyen = this.props.location.state.idCitoyen;\n        console.log(idOffre);\n        console.log(idCitoyen);\n        const url = \"http://localhost:8080/Web-Project/project/GetCandidatureIdByIdOffre/\"+idOffre+\"/\"+idCitoyen;\n        fetch(url).then(res => res.json()).then((data) => { console.log(data);\n            if (Array.from(event.target.files).length != 1) {\n                event.preventDefault();\n                alert(`Il faut télécharger un seul document qui est le CV`);\n                return;\n            }\n            const fileName = this.props.location.state.id+\"-\"+event.target.files[0].name;\n            const url2 = \"http://localhost:8080/Web-Project/project/AddCVCandidature/\"+data+\"/\"+fileName;\n    \n            fetch(url2, {\n                method: \"put\",\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json'\n                }\n                })});\n\n\n    }\n    render() {\n      return (\n          <div>\n              <HeaderCitoyen id={this.props.location.state.id} />\n              <hr className=\"overall-separator\"/>\n              <h1 class=\"UploadCarteSejourH1\" >Télécharger votre CV</h1>\n              <form method=\"POST\" action=\"http://localhost:8080/Web-Project/Upload\" enctype=\"multipart/form-data\">\n                <table>\n                    <div className=\"form-group\">\n                        <br></br>\n                        <input class =\"upload-file\" type=\"file\" name=\"file\" multiple onChange={this.onFileChange}/>\n                        <input type=\"text\" name=\"id\" value={this.props.location.state.id} hidden/>\n                    </div>\n                    <br></br>\n                    <br></br>\n                    <input type=\"submit\" name=\"submit\" className=\"btn   btn-primary btn-block btn-upload\" value=\"Envoyer la candidature\" />\n                </table>\n            </form>\n          </div>\n\n      )\n    }\n  }\n  export default UploadCV;"]},"metadata":{},"sourceType":"module"}