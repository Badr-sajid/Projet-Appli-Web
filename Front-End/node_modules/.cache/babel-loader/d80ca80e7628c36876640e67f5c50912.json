{"ast":null,"code":"var _jsxFileName = \"/home/issam/Desktop/Projet React/try/src/DemandeCarte.js\";\nimport React, { Component } from \"react\";\nimport './auth-css/auth.css';\nimport HeaderCitoyen from './HeaderCitoyen';\nimport history from './history';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass DemandeCarte extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedFile: null,\n      userdata: {},\n      civilite: \"\",\n      nom: \"\",\n      prenom: \"\",\n      datedenaisssance: \"\",\n      lieudenaissance: \"\",\n      nationalite: \"\",\n      adresse: \"\",\n      statut: \"\",\n      revenu: 0,\n      idCitoyen: 1\n    };\n    this.onFormSubmit = this.onFormSubmit.bind(this);\n  }\n\n  onFormSubmit(e) {\n    e.preventDefault(); // Stop form submit\n    // Ajout Citoyen\n\n    fetch(\"http://localhost:8080/Web-Project/project/AddDemande\", {\n      method: \"post\",\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        citoyen: {\n          id: this.state.idCitoyen\n        },\n        typeDemande: \"carte\",\n        estTraite: \"false\",\n        demandeCarteSejour: {\n          genre: this.state.userdata[\"civilite\"],\n          nom: this.state.userdata[\"nom\"],\n          prenom: this.state.userdata[\"prenom\"],\n          adresse: this.state.adresse,\n          datedenaissance: this.state.userdata[\"dateDeNaissance\"],\n          lieudenaissance: this.state.userdata[\"lieuDeNaissance\"],\n          nationnalite: this.state.userdata[\"nationalite\"],\n          statut: this.state.userdata[\"statut\"],\n          revenumensuel: this.state.revenu,\n          documents: null\n        }\n      })\n    });\n    history.push({\n      pathname: \"/UploadCarteSejour\",\n      state: {\n        id: this.props.location.state.id\n      }\n    });\n  }\n\n  componentDidMount() {\n    // Recuperer les informations de citoyen.\n    const url = \"http://localhost:8080/Web-Project/project/GetLoginId/\" + this.props.location.state.id;\n    fetch(url).then(res => res.json()).then(result => {\n      this.setState({\n        idCitoyen: result[0][\"idLogin\"]\n      });\n      const url2 = \"http://localhost:8080/Web-Project/project/GetCitoyenById/\" + result[0][\"idLogin\"];\n      fetch(url2).then(res => res.json()).then(data => {\n        console.log(data);\n        this.setState({\n          userdata: data\n        });\n      }, // Remarque : il est important de traiter les erreurs ici\n      // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n      // des exceptions provenant de réels bugs du composant.\n      error => {});\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(HeaderCitoyen, {\n        id: this.props.location.state.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        className: \"overall-separator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.onFormSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"carte-sejour\",\n          children: \"Demande de carte de s\\xE9jour\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Nom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"nom\",\n            className: \"form-control\",\n            disabled: true,\n            value: this.state.userdata[\"nom\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Prenom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"prenom\",\n            className: \"form-control\",\n            disabled: true,\n            value: this.state.userdata[\"prenom\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Date de naissance  \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            className: \"form-control\",\n            id: \"start\",\n            name: \"trip-start\",\n            disabled: true,\n            value: this.state.userdata[\"dateDeNaissance\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Lieu de naissance \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"lieudenaissance\",\n            className: \"form-control\",\n            disabled: true,\n            value: this.state.userdata[\"lieuDeNaissance\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Nationalit\\xE9 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"nationalite\",\n            className: \"form-control\",\n            disabled: true,\n            value: this.state.userdata[\"nationalite\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Statut \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"statut\",\n            className: \"form-control\",\n            value: this.state.userdata[\"statut\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Adresse \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"adresse\",\n            className: \"form-control\",\n            onChange: e => {\n              this.setState({\n                adresse: e.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Revenu mensuel en Euro \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"revenumensuel\",\n            className: \"form-control\",\n            onChange: e => {\n              this.setState({\n                revenu: e.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn   btn-primary btn-block\",\n          children: \"Envoyer la demande\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nexport default DemandeCarte;","map":{"version":3,"sources":["/home/issam/Desktop/Projet React/try/src/DemandeCarte.js"],"names":["React","Component","HeaderCitoyen","history","DemandeCarte","constructor","props","state","selectedFile","userdata","civilite","nom","prenom","datedenaisssance","lieudenaissance","nationalite","adresse","statut","revenu","idCitoyen","onFormSubmit","bind","e","preventDefault","fetch","method","headers","body","JSON","stringify","citoyen","id","typeDemande","estTraite","demandeCarteSejour","genre","datedenaissance","nationnalite","revenumensuel","documents","push","pathname","location","componentDidMount","url","then","res","json","result","setState","url2","data","console","log","error","render","target","value"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport './auth-css/auth.css';\n\nimport HeaderCitoyen from './HeaderCitoyen';\nimport history from './history';\n\n\nclass DemandeCarte extends Component {\n\n\n    constructor(props) {\n        super(props);\n        this.state ={\n            selectedFile:null,\n            userdata:{},\n            civilite:\"\",\n            nom: \"\",\n            prenom: \"\",\n            datedenaisssance: \"\",\n            lieudenaissance:\"\",\n            nationalite:\"\",\n            adresse:\"\",\n            statut:\"\",\n            revenu: 0,\n            idCitoyen: 1,\n        }\n        this.onFormSubmit = this.onFormSubmit.bind(this);\n    }\n    onFormSubmit(e){\n        e.preventDefault() // Stop form submit\n\n                  // Ajout Citoyen\n        fetch(\"http://localhost:8080/Web-Project/project/AddDemande\", {\n          method: \"post\",\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            citoyen: {id: this.state.idCitoyen},\n            typeDemande: \"carte\",\n            estTraite: \"false\",\n            demandeCarteSejour: {\n              genre: this.state.userdata[\"civilite\"],\n              nom: this.state.userdata[\"nom\"],\n              prenom: this.state.userdata[\"prenom\"],\n              adresse: this.state.adresse,\n              datedenaissance: this.state.userdata[\"dateDeNaissance\"],\n              lieudenaissance: this.state.userdata[\"lieuDeNaissance\"],\n              nationnalite: this.state.userdata[\"nationalite\"],\n              statut: this.state.userdata[\"statut\"],\n              revenumensuel: this.state.revenu,\n              documents: null\n            }\n  \n  \n          })\n          });    \n          history.push({pathname: \"/UploadCarteSejour\",\n          state: {id: this.props.location.state.id}})\n\n    }\n\n\n    componentDidMount(){\n        // Recuperer les informations de citoyen.\n        const url = \"http://localhost:8080/Web-Project/project/GetLoginId/\"+this.props.location.state.id;\n\n        fetch(url).then(res => res.json()).then((result) => {\n          this.setState({idCitoyen: result[0][\"idLogin\"]});\n          const url2 = \"http://localhost:8080/Web-Project/project/GetCitoyenById/\"+result[0][\"idLogin\"];\n          fetch(url2)\n              .then(res => res.json())\n              .then(\n              (data) => {\n                console.log(data);\n                this.setState({userdata: data});\n              },\n              // Remarque : il est important de traiter les erreurs ici\n              // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n              // des exceptions provenant de réels bugs du composant.\n              (error) => {\n\n              }\n              )})\n\n    }\n\n    render(){\n        return(\n          <div>\n                <HeaderCitoyen id={this.props.location.state.id} />\n                <hr className=\"overall-separator\" />\n\n                <form onSubmit={this.onFormSubmit}>\n                    <h3 className=\"carte-sejour\">Demande de carte de séjour</h3>\n                    <div className=\"form-group\">\n                        <label>Nom</label>\n                        <input type=\"text\" name=\"nom\" className=\"form-control\" disabled value={this.state.userdata[\"nom\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                        <label>Prenom</label>\n                        <input type=\"text\" name=\"prenom\" className=\"form-control\" disabled value={this.state.userdata[\"prenom\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                        <label>Date de naissance  </label>\n                        <input type=\"date\"  className=\"form-control\" id=\"start\" name=\"trip-start\"\n                                disabled\n                                value={this.state.userdata[\"dateDeNaissance\"]}\n                              />\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Lieu de naissance </label>\n                    <input type=\"text\" name=\"lieudenaissance\" className=\"form-control\" disabled value={this.state.userdata[\"lieuDeNaissance\"]} />\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Nationalité </label>\n                    <input type=\"text\" name=\"nationalite\" className=\"form-control\" disabled value={this.state.userdata[\"nationalite\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Statut </label>\n                    <input type=\"text\" name=\"statut\" className=\"form-control\" value={this.state.userdata[\"statut\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Adresse </label>\n                    <input type=\"text\" name=\"adresse\" className=\"form-control\" onChange={(e) => {this.setState({adresse: e.target.value})}}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Revenu mensuel en Euro </label>\n                    <input type=\"text\" name=\"revenumensuel\" className=\"form-control\" onChange={(e) => {this.setState({revenu: e.target.value})}}/>\n                    </div>\n                    <br></br>\n                    <button type=\"submit\" className=\"btn   btn-primary btn-block\">Envoyer la demande</button>\n                    \n                </form>\n            </div>\n        )\n    }\n}\n\nexport default DemandeCarte;"]},"metadata":{},"sourceType":"module"}