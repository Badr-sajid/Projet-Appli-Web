{"ast":null,"code":"import _classCallCheck from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import'./auth-css/auth.css';import HeaderCitoyen from'./HeaderCitoyen';import history from'./history';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DemandeCarte=/*#__PURE__*/function(_Component){_inherits(DemandeCarte,_Component);var _super=_createSuper(DemandeCarte);function DemandeCarte(props){var _this;_classCallCheck(this,DemandeCarte);_this=_super.call(this,props);_this.state={selectedFile:null,userdata:{},civilite:\"\",nom:\"\",prenom:\"\",datedenaisssance:\"\",lieudenaissance:\"\",nationalite:\"\",adresse:\"\",statut:\"\",revenu:0,idCitoyen:1};_this.onFormSubmit=_this.onFormSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(DemandeCarte,[{key:\"onFormSubmit\",value:function onFormSubmit(e){e.preventDefault();// Stop form submit\n// Ajout Citoyen\nfetch(\"http://localhost:8080/Web-Project/project/AddDemande\",{method:\"post\",headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({citoyen:{id:this.state.idCitoyen},typeDemande:\"carte\",estTraite:\"false\",demandeCarteSejour:{genre:this.state.userdata[\"civilite\"],nom:this.state.userdata[\"nom\"],prenom:this.state.userdata[\"prenom\"],adresse:this.state.adresse,datedenaissance:this.state.userdata[\"dateDeNaissance\"],lieudenaissance:this.state.userdata[\"lieuDeNaissance\"],nationnalite:this.state.userdata[\"nationalite\"],statut:this.state.userdata[\"statut\"],revenumensuel:this.state.revenu}})});history.push({pathname:\"/UploadCarteSejour\",state:{id:this.props.location.state.id}});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Recuperer les informations de citoyen.\nvar url=\"http://localhost:8080/Web-Project/project/GetLoginId/\"+this.props.location.state.id;fetch(url).then(function(res){return res.json();}).then(function(result){_this2.setState({idCitoyen:result[0][\"idLogin\"]});var url2=\"http://localhost:8080/Web-Project/project/GetCitoyenById/\"+result[0][\"idLogin\"];fetch(url2).then(function(res){return res.json();}).then(function(data){console.log(data);_this2.setState({userdata:data});},// Remarque : il est important de traiter les erreurs ici\n// au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n// des exceptions provenant de réels bugs du composant.\nfunction(error){});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HeaderCitoyen,{id:this.props.location.state.id}),/*#__PURE__*/_jsx(\"hr\",{className:\"overall-separator\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onFormSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"carte-sejour\",children:\"Demande de carte de s\\xE9jour\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nom\",className:\"form-control\",disabled:true,value:this.state.userdata[\"nom\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Prenom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"prenom\",className:\"form-control\",disabled:true,value:this.state.userdata[\"prenom\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date de naissance  \"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",id:\"start\",name:\"trip-start\",disabled:true,value:this.state.userdata[\"dateDeNaissance\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Lieu de naissance \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lieudenaissance\",className:\"form-control\",disabled:true,value:this.state.userdata[\"lieuDeNaissance\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nationalit\\xE9 \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nationalite\",className:\"form-control\",disabled:true,value:this.state.userdata[\"nationalite\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Statut \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"statut\",className:\"form-control\",value:this.state.userdata[\"statut\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Adresse \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"adresse\",className:\"form-control\",onChange:function onChange(e){_this3.setState({adresse:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Revenu mensuel en Euro \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"revenumensuel\",className:\"form-control\",onChange:function onChange(e){_this3.setState({revenu:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn   btn-primary btn-block\",children:\"Envoyer la demande\"})]})]});}}]);return DemandeCarte;}(Component);export default DemandeCarte;","map":{"version":3,"sources":["/Users/badrsajid/Desktop/MonCitoyen/Front-End/src/DemandeCarte.js"],"names":["React","Component","HeaderCitoyen","history","DemandeCarte","props","state","selectedFile","userdata","civilite","nom","prenom","datedenaisssance","lieudenaissance","nationalite","adresse","statut","revenu","idCitoyen","onFormSubmit","bind","e","preventDefault","fetch","method","headers","body","JSON","stringify","citoyen","id","typeDemande","estTraite","demandeCarteSejour","genre","datedenaissance","nationnalite","revenumensuel","push","pathname","location","url","then","res","json","result","setState","url2","data","console","log","error","target","value"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport './auth-css/auth.css';\n\nimport HeaderCitoyen from './HeaderCitoyen';\nimport history from './history';\n\n\nclass DemandeCarte extends Component {\n\n\n    constructor(props) {\n        super(props);\n        this.state ={\n            selectedFile:null,\n            userdata:{},\n            civilite:\"\",\n            nom: \"\",\n            prenom: \"\",\n            datedenaisssance: \"\",\n            lieudenaissance:\"\",\n            nationalite:\"\",\n            adresse:\"\",\n            statut:\"\",\n            revenu: 0,\n            idCitoyen: 1,\n        }\n        this.onFormSubmit = this.onFormSubmit.bind(this);\n    }\n    onFormSubmit(e){\n        e.preventDefault() // Stop form submit\n\n                  // Ajout Citoyen\n        fetch(\"http://localhost:8080/Web-Project/project/AddDemande\", {\n          method: \"post\",\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            citoyen: {id: this.state.idCitoyen},\n            typeDemande: \"carte\",\n            estTraite: \"false\",\n            demandeCarteSejour: {\n              genre: this.state.userdata[\"civilite\"],\n              nom: this.state.userdata[\"nom\"],\n              prenom: this.state.userdata[\"prenom\"],\n              adresse: this.state.adresse,\n              datedenaissance: this.state.userdata[\"dateDeNaissance\"],\n              lieudenaissance: this.state.userdata[\"lieuDeNaissance\"],\n              nationnalite: this.state.userdata[\"nationalite\"],\n              statut: this.state.userdata[\"statut\"],\n              revenumensuel: this.state.revenu,\n            }\n  \n  \n          })\n          });    \n          history.push({pathname: \"/UploadCarteSejour\",\n          state: {id: this.props.location.state.id}})\n\n    }\n\n\n    componentDidMount(){\n        // Recuperer les informations de citoyen.\n        const url = \"http://localhost:8080/Web-Project/project/GetLoginId/\"+this.props.location.state.id;\n\n        fetch(url).then(res => res.json()).then((result) => {\n          this.setState({idCitoyen: result[0][\"idLogin\"]});\n          const url2 = \"http://localhost:8080/Web-Project/project/GetCitoyenById/\"+result[0][\"idLogin\"];\n          fetch(url2)\n              .then(res => res.json())\n              .then(\n              (data) => {\n                console.log(data);\n                this.setState({userdata: data});\n              },\n              // Remarque : il est important de traiter les erreurs ici\n              // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n              // des exceptions provenant de réels bugs du composant.\n              (error) => {\n\n              }\n              )})\n\n    }\n\n    render(){\n        return(\n          <div>\n                <HeaderCitoyen id={this.props.location.state.id} />\n                <hr className=\"overall-separator\" />\n\n                <form onSubmit={this.onFormSubmit}>\n                    <h3 className=\"carte-sejour\">Demande de carte de séjour</h3>\n                    <div className=\"form-group\">\n                        <label>Nom</label>\n                        <input type=\"text\" name=\"nom\" className=\"form-control\" disabled value={this.state.userdata[\"nom\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                        <label>Prenom</label>\n                        <input type=\"text\" name=\"prenom\" className=\"form-control\" disabled value={this.state.userdata[\"prenom\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                        <label>Date de naissance  </label>\n                        <input type=\"date\"  className=\"form-control\" id=\"start\" name=\"trip-start\"\n                                disabled\n                                value={this.state.userdata[\"dateDeNaissance\"]}\n                              />\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Lieu de naissance </label>\n                    <input type=\"text\" name=\"lieudenaissance\" className=\"form-control\" disabled value={this.state.userdata[\"lieuDeNaissance\"]} />\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Nationalité </label>\n                    <input type=\"text\" name=\"nationalite\" className=\"form-control\" disabled value={this.state.userdata[\"nationalite\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Statut </label>\n                    <input type=\"text\" name=\"statut\" className=\"form-control\" value={this.state.userdata[\"statut\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Adresse </label>\n                    <input type=\"text\" name=\"adresse\" className=\"form-control\" onChange={(e) => {this.setState({adresse: e.target.value})}}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Revenu mensuel en Euro </label>\n                    <input type=\"text\" name=\"revenumensuel\" className=\"form-control\" onChange={(e) => {this.setState({revenu: e.target.value})}}/>\n                    </div>\n                    <br></br>\n                    <button type=\"submit\" className=\"btn   btn-primary btn-block\">Envoyer la demande</button>\n                    \n                </form>\n            </div>\n        )\n    }\n}\n\nexport default DemandeCarte;"]},"metadata":{},"sourceType":"module"}