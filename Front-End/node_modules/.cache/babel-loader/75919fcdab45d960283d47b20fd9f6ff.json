{"ast":null,"code":"import _classCallCheck from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import'./auth-css/auth.css';import HeaderCitoyen from'./HeaderCitoyen';import history from'./history';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DemandePasseport=/*#__PURE__*/function(_Component){_inherits(DemandePasseport,_Component);var _super=_createSuper(DemandePasseport);function DemandePasseport(props){var _this;_classCallCheck(this,DemandePasseport);_this=_super.call(this,props);_this.onFileChange=function(event){// Update the state \n_this.setState({selectedFile:event.target.files[0]});};_this.onFileUpload=function(){// Create an object of formData \nvar formData=new FormData();// Update the formData object \nformData.append(\"fichier\",_this.state.selectedFile,_this.state.selectedFile.name);// Details of the uploaded file \nconsole.log(_this.state.selectedFile);// Request made to the backend api \n// Send formData object \n//fetch(\"api/uploadfile\", formData); \n};_this.state={selectedFile:null,userdata:{},civilite:\"\",nom:\"\",prenom:\"\",datedenaisssance:\"\",lieudenaissance:\"\",adresse:\"\",remarques:\"\",statut:\"\",idCitoyen:1};_this.onFormSubmit=_this.onFormSubmit.bind(_assertThisInitialized(_this));_this.onFileChange=_this.onFileChange.bind(_assertThisInitialized(_this));return _this;}_createClass(DemandePasseport,[{key:\"onFormSubmit\",value:function onFormSubmit(e){e.preventDefault();// Stop form submit\n// Ajout Citoyen\nfetch(\"http://localhost:8080/Web-Project/project/AddDemande\",{method:\"post\",headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({citoyen:{id:this.state.idCitoyen},typeDemande:\"passeport\",estTraite:\"false\",demandePasseport:{genre:this.state.userdata[\"civilite\"],nom:this.state.userdata[\"nom\"],prenom:this.state.userdata[\"prenom\"],adresse:this.state.adresse,datedenaissance:this.state.userdata[\"dateDeNaissance\"],lieudenaissance:this.state.userdata[\"lieuDeNaissance\"],statut:this.state.userdata[\"statut\"],remarque:this.state.remarques}})});history.push({pathname:\"/UploadPasseport\",state:{id:this.props.location.state.id}});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Recuperer les informations de citoyen.\nvar url=\"http://localhost:8080/Web-Project/project/GetLoginId/\"+this.props.location.state.id;fetch(url).then(function(res){return res.json();}).then(function(result){_this2.setState({idCitoyen:result[0][\"idLogin\"]});var url2=\"http://localhost:8080/Web-Project/project/GetCitoyenById/\"+result[0][\"idLogin\"];fetch(url2).then(function(res){return res.json();}).then(function(data){console.log(data);_this2.setState({userdata:data});},// Remarque : il est important de traiter les erreurs ici\n// au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n// des exceptions provenant de réels bugs du composant.\nfunction(error){});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HeaderCitoyen,{id:this.props.location.state.id}),/*#__PURE__*/_jsx(\"hr\",{className:\"overall-separator\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onFormSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"carte-sejour\",children:\"Demande de passeport\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nom\",className:\"form-control\",disabled:true,value:this.state.userdata[\"nom\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Prenom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"prenom\",className:\"form-control\",disabled:true,value:this.state.userdata[\"prenom\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date de naissance  \"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",id:\"start\",name:\"trip-start\",disabled:true,value:this.state.userdata[\"dateDeNaissance\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Lieu de naissance \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lieudenaissance\",className:\"form-control\",disabled:true,value:this.state.userdata[\"lieuDeNaissance\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Statut \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"statut\",className:\"form-control\",value:this.state.userdata[\"statut\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Adresse \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"adresse\",className:\"form-control\",onChange:function onChange(e){_this3.setState({adresse:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Remarques \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"remarques\",className:\"form-control\",onChange:function onChange(e){_this3.setState({remarques:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn   btn-primary btn-block\",children:\"Envoyer la demande\"})]})]});}}]);return DemandePasseport;}(Component);export default DemandePasseport;","map":{"version":3,"sources":["/Users/badrsajid/Desktop/MonCitoyen/Front-End/src/DemandePasseport.js"],"names":["React","Component","HeaderCitoyen","history","DemandePasseport","props","onFileChange","event","setState","selectedFile","target","files","onFileUpload","formData","FormData","append","state","name","console","log","userdata","civilite","nom","prenom","datedenaisssance","lieudenaissance","adresse","remarques","statut","idCitoyen","onFormSubmit","bind","e","preventDefault","fetch","method","headers","body","JSON","stringify","citoyen","id","typeDemande","estTraite","demandePasseport","genre","datedenaissance","remarque","push","pathname","location","url","then","res","json","result","url2","data","error","value"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport './auth-css/auth.css';\n\nimport HeaderCitoyen from './HeaderCitoyen';\nimport history from './history';\n\n\nclass DemandePasseport extends Component {\n\n\n    constructor(props) {\n        super(props);\n        this.state ={\n            selectedFile:null,\n            userdata:{},\n            civilite:\"\",\n            nom: \"\",\n            prenom: \"\",\n            datedenaisssance: \"\",\n            lieudenaissance:\"\",\n            adresse:\"\",\n            remarques:\"\",\n            statut: \"\",\n            idCitoyen: 1,\n        }\n        this.onFormSubmit = this.onFormSubmit.bind(this);\n        this.onFileChange = this.onFileChange.bind(this)\n    }\n    onFileChange = event => { \n        // Update the state \n        this.setState({ selectedFile: event.target.files[0] }); \n      }; \n    // On file upload (click the upload button) \n    onFileUpload = () => { \n        // Create an object of formData \n        const formData = new FormData(); \n        \n        // Update the formData object \n        formData.append( \n            \"fichier\", \n            this.state.selectedFile, \n            this.state.selectedFile.name \n        ); \n        \n        // Details of the uploaded file \n        console.log(this.state.selectedFile); \n        \n        // Request made to the backend api \n        // Send formData object \n        //fetch(\"api/uploadfile\", formData); \n        }; \n    onFormSubmit(e){\n        e.preventDefault() // Stop form submit\n\n                  // Ajout Citoyen\n        fetch(\"http://localhost:8080/Web-Project/project/AddDemande\", {\n          method: \"post\",\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            citoyen: {id: this.state.idCitoyen},\n            typeDemande: \"passeport\",\n            estTraite: \"false\",\n            demandePasseport: {\n              genre: this.state.userdata[\"civilite\"],\n              nom: this.state.userdata[\"nom\"],\n              prenom: this.state.userdata[\"prenom\"],\n              adresse: this.state.adresse,\n              datedenaissance: this.state.userdata[\"dateDeNaissance\"],\n              lieudenaissance: this.state.userdata[\"lieuDeNaissance\"],\n              statut: this.state.userdata[\"statut\"],\n              remarque: this.state.remarques,\n            }\n  \n  \n          })\n          });    \n          history.push({pathname: \"/UploadPasseport\",\n          state: {id: this.props.location.state.id}})\n\n    }\n\n\n    componentDidMount(){\n        // Recuperer les informations de citoyen.\n        const url = \"http://localhost:8080/Web-Project/project/GetLoginId/\"+this.props.location.state.id;\n\n        fetch(url).then(res => res.json()).then((result) => {\n          this.setState({idCitoyen: result[0][\"idLogin\"]});\n          const url2 = \"http://localhost:8080/Web-Project/project/GetCitoyenById/\"+result[0][\"idLogin\"];\n          fetch(url2)\n              .then(res => res.json())\n              .then(\n              (data) => {\n                console.log(data);\n                this.setState({userdata: data});\n              },\n              // Remarque : il est important de traiter les erreurs ici\n              // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n              // des exceptions provenant de réels bugs du composant.\n              (error) => {\n\n              }\n              )})\n\n    }\n\n    render(){\n        return(\n          <div>\n                <HeaderCitoyen id={this.props.location.state.id} />\n                <hr className=\"overall-separator\" />\n\n                <form onSubmit={this.onFormSubmit}>\n                    <h3 className=\"carte-sejour\">Demande de passeport</h3>\n                    <div className=\"form-group\">\n                        <label>Nom</label>\n                        <input type=\"text\" name=\"nom\" className=\"form-control\" disabled value={this.state.userdata[\"nom\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                        <label>Prenom</label>\n                        <input type=\"text\" name=\"prenom\" className=\"form-control\" disabled value={this.state.userdata[\"prenom\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                        <label>Date de naissance  </label>\n                        <input type=\"date\"  className=\"form-control\" id=\"start\" name=\"trip-start\"\n                                disabled\n                                value={this.state.userdata[\"dateDeNaissance\"]}\n                              />\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Lieu de naissance </label>\n                    <input type=\"text\" name=\"lieudenaissance\" className=\"form-control\" disabled value={this.state.userdata[\"lieuDeNaissance\"]} />\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Statut </label>\n                    <input type=\"text\" name=\"statut\" className=\"form-control\" value={this.state.userdata[\"statut\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Adresse </label>\n                    <input type=\"text\" name=\"adresse\" className=\"form-control\" onChange={(e) => {this.setState({adresse: e.target.value})}}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Remarques </label>\n                    <input type=\"text\" name=\"remarques\" className=\"form-control\" onChange={(e) => {this.setState({remarques: e.target.value})}}/>\n                    </div>\n                    <br></br>\n\n\n                    <br></br>\n                    <button type=\"submit\" className=\"btn   btn-primary btn-block\">Envoyer la demande</button>\n                    \n                </form>\n            </div>\n        )\n    }\n}\n\nexport default DemandePasseport;"]},"metadata":{},"sourceType":"module"}