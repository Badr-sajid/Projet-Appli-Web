{"ast":null,"code":"var _jsxFileName = \"/home/issam/Desktop/Projet React/try/src/DemandePasseport.js\";\nimport React, { Component } from \"react\";\nimport './auth-css/auth.css';\nimport HeaderCitoyen from './HeaderCitoyen';\nimport history from './history';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass DemandePasseport extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onFileChange = event => {\n      // Update the state \n      this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    this.onFileUpload = () => {\n      // Create an object of formData \n      const formData = new FormData(); // Update the formData object \n\n      formData.append(\"fichier\", this.state.selectedFile, this.state.selectedFile.name); // Details of the uploaded file \n\n      console.log(this.state.selectedFile); // Request made to the backend api \n      // Send formData object \n      //fetch(\"api/uploadfile\", formData); \n    };\n\n    this.state = {\n      selectedFile: null,\n      userdata: {},\n      civilite: \"\",\n      nom: \"\",\n      prenom: \"\",\n      datedenaisssance: \"\",\n      lieudenaissance: \"\",\n      adresse: \"\",\n      remarques: \"\",\n      statut: \"\",\n      idCitoyen: 1\n    };\n    this.onFormSubmit = this.onFormSubmit.bind(this);\n    this.onFileChange = this.onFileChange.bind(this);\n  }\n\n  onFormSubmit(e) {\n    e.preventDefault(); // Stop form submit\n    // Ajout Citoyen\n\n    fetch(\"http://localhost:8080/Web-Project/project/AddDemande\", {\n      method: \"post\",\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        citoyen: {\n          id: this.state.idCitoyen\n        },\n        typeDemande: \"passeport\",\n        estTraite: \"false\",\n        demandePasseport: {\n          genre: this.state.userdata[\"civilite\"],\n          nom: this.state.userdata[\"nom\"],\n          prenom: this.state.userdata[\"prenom\"],\n          adresse: this.state.adresse,\n          datedenaissance: this.state.userdata[\"dateDeNaissance\"],\n          lieudenaissance: this.state.userdata[\"lieuDeNaissance\"],\n          statut: this.state.userdata[\"statut\"],\n          remarque: this.state.remarques,\n          documents: null\n        }\n      })\n    });\n    history.push({\n      pathname: \"/HomeCitoyen\",\n      state: {\n        id: this.props.location.state.id\n      }\n    });\n  }\n\n  componentDidMount() {\n    // Recuperer les informations de citoyen.\n    const url = \"http://localhost:8080/Web-Project/project/GetLoginId/\" + this.props.location.state.id;\n    fetch(url).then(res => res.json()).then(result => {\n      this.setState({\n        idCitoyen: result[0][\"idLogin\"]\n      });\n      const url2 = \"http://localhost:8080/Web-Project/project/GetCitoyenById/\" + result[0][\"idLogin\"];\n      fetch(url2).then(res => res.json()).then(data => {\n        console.log(data);\n        this.setState({\n          userdata: data\n        });\n      }, // Remarque : il est important de traiter les erreurs ici\n      // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n      // des exceptions provenant de réels bugs du composant.\n      error => {});\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(HeaderCitoyen, {\n        id: this.props.location.state.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        className: \"overall-separator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.onFormSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"carte-sejour\",\n          children: \"Demande de passeport\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Nom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"nom\",\n            className: \"form-control\",\n            disabled: true,\n            value: this.state.userdata[\"nom\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Prenom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"prenom\",\n            className: \"form-control\",\n            disabled: true,\n            value: this.state.userdata[\"prenom\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Date de naissance  \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            className: \"form-control\",\n            id: \"start\",\n            name: \"trip-start\",\n            disabled: true,\n            value: this.state.userdata[\"dateDeNaissance\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Lieu de naissance \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"lieudenaissance\",\n            className: \"form-control\",\n            disabled: true,\n            value: this.state.userdata[\"lieuDeNaissance\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Statut \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"statut\",\n            className: \"form-control\",\n            value: this.state.userdata[\"statut\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Adresse \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"adresse\",\n            className: \"form-control\",\n            onChange: e => {\n              this.setState({\n                adresse: e.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Remarques \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"remarques\",\n            className: \"form-control\",\n            onChange: e => {\n              this.setState({\n                remarques: e.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Documents\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: this.onFileChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn   btn-primary btn-block\",\n          children: \"Envoyer la demande\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nexport default DemandePasseport;","map":{"version":3,"sources":["/home/issam/Desktop/Projet React/try/src/DemandePasseport.js"],"names":["React","Component","HeaderCitoyen","history","DemandePasseport","constructor","props","onFileChange","event","setState","selectedFile","target","files","onFileUpload","formData","FormData","append","state","name","console","log","userdata","civilite","nom","prenom","datedenaisssance","lieudenaissance","adresse","remarques","statut","idCitoyen","onFormSubmit","bind","e","preventDefault","fetch","method","headers","body","JSON","stringify","citoyen","id","typeDemande","estTraite","demandePasseport","genre","datedenaissance","remarque","documents","push","pathname","location","componentDidMount","url","then","res","json","result","url2","data","error","render","value"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport './auth-css/auth.css';\n\nimport HeaderCitoyen from './HeaderCitoyen';\nimport history from './history';\n\n\nclass DemandePasseport extends Component {\n\n\n    constructor(props) {\n        super(props);\n        this.state ={\n            selectedFile:null,\n            userdata:{},\n            civilite:\"\",\n            nom: \"\",\n            prenom: \"\",\n            datedenaisssance: \"\",\n            lieudenaissance:\"\",\n            adresse:\"\",\n            remarques:\"\",\n            statut: \"\",\n            idCitoyen: 1,\n        }\n        this.onFormSubmit = this.onFormSubmit.bind(this);\n        this.onFileChange = this.onFileChange.bind(this)\n    }\n    onFileChange = event => { \n        // Update the state \n        this.setState({ selectedFile: event.target.files[0] }); \n      }; \n    // On file upload (click the upload button) \n    onFileUpload = () => { \n        // Create an object of formData \n        const formData = new FormData(); \n        \n        // Update the formData object \n        formData.append( \n            \"fichier\", \n            this.state.selectedFile, \n            this.state.selectedFile.name \n        ); \n        \n        // Details of the uploaded file \n        console.log(this.state.selectedFile); \n        \n        // Request made to the backend api \n        // Send formData object \n        //fetch(\"api/uploadfile\", formData); \n        }; \n    onFormSubmit(e){\n        e.preventDefault() // Stop form submit\n\n                  // Ajout Citoyen\n        fetch(\"http://localhost:8080/Web-Project/project/AddDemande\", {\n          method: \"post\",\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            citoyen: {id: this.state.idCitoyen},\n            typeDemande: \"passeport\",\n            estTraite: \"false\",\n            demandePasseport: {\n              genre: this.state.userdata[\"civilite\"],\n              nom: this.state.userdata[\"nom\"],\n              prenom: this.state.userdata[\"prenom\"],\n              adresse: this.state.adresse,\n              datedenaissance: this.state.userdata[\"dateDeNaissance\"],\n              lieudenaissance: this.state.userdata[\"lieuDeNaissance\"],\n              statut: this.state.userdata[\"statut\"],\n              remarque: this.state.remarques,\n              documents: null\n            }\n  \n  \n          })\n          });    \n          history.push({pathname: \"/HomeCitoyen\",\n          state: {id: this.props.location.state.id}})\n\n    }\n\n\n    componentDidMount(){\n        // Recuperer les informations de citoyen.\n        const url = \"http://localhost:8080/Web-Project/project/GetLoginId/\"+this.props.location.state.id;\n\n        fetch(url).then(res => res.json()).then((result) => {\n          this.setState({idCitoyen: result[0][\"idLogin\"]});\n          const url2 = \"http://localhost:8080/Web-Project/project/GetCitoyenById/\"+result[0][\"idLogin\"];\n          fetch(url2)\n              .then(res => res.json())\n              .then(\n              (data) => {\n                console.log(data);\n                this.setState({userdata: data});\n              },\n              // Remarque : il est important de traiter les erreurs ici\n              // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n              // des exceptions provenant de réels bugs du composant.\n              (error) => {\n\n              }\n              )})\n\n    }\n\n    render(){\n        return(\n          <div>\n                <HeaderCitoyen id={this.props.location.state.id} />\n                <hr className=\"overall-separator\" />\n\n                <form onSubmit={this.onFormSubmit}>\n                    <h3 className=\"carte-sejour\">Demande de passeport</h3>\n                    <div className=\"form-group\">\n                        <label>Nom</label>\n                        <input type=\"text\" name=\"nom\" className=\"form-control\" disabled value={this.state.userdata[\"nom\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                        <label>Prenom</label>\n                        <input type=\"text\" name=\"prenom\" className=\"form-control\" disabled value={this.state.userdata[\"prenom\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                        <label>Date de naissance  </label>\n                        <input type=\"date\"  className=\"form-control\" id=\"start\" name=\"trip-start\"\n                                disabled\n                                value={this.state.userdata[\"dateDeNaissance\"]}\n                              />\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Lieu de naissance </label>\n                    <input type=\"text\" name=\"lieudenaissance\" className=\"form-control\" disabled value={this.state.userdata[\"lieuDeNaissance\"]} />\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Statut </label>\n                    <input type=\"text\" name=\"statut\" className=\"form-control\" value={this.state.userdata[\"statut\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Adresse </label>\n                    <input type=\"text\" name=\"adresse\" className=\"form-control\" onChange={(e) => {this.setState({adresse: e.target.value})}}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Remarques </label>\n                    <input type=\"text\" name=\"remarques\" className=\"form-control\" onChange={(e) => {this.setState({remarques: e.target.value})}}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Documents</label>\n                    <input type=\"file\" onChange={this.onFileChange} /> \n\n                    </div>\n                    <br></br>\n                    <button type=\"submit\" className=\"btn   btn-primary btn-block\">Envoyer la demande</button>\n                    \n                </form>\n            </div>\n        )\n    }\n}\n\nexport default DemandePasseport;"]},"metadata":{},"sourceType":"module"}