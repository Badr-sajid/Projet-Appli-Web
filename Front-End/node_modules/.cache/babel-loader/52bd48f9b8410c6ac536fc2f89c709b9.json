{"ast":null,"code":"var _jsxFileName = \"/home/issam/Desktop/Projet React/try/src/DemandeCarte.js\";\nimport React, { Component } from \"react\";\nimport './auth-css/auth.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass DemandeCarte extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onFileChange = event => {\n      // Update the state \n      this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    this.onFileUpload = () => {\n      // Create an object of formData \n      const formData = new FormData(); // Update the formData object \n\n      formData.append(\"fichier\", this.state.selectedFile, this.state.selectedFile.name); // Details of the uploaded file \n\n      console.log(this.state.selectedFile); // Request made to the backend api \n      // Send formData object \n      //fetch(\"api/uploadfile\", formData); \n    };\n\n    this.state = {\n      selectedFile: null,\n      userdata: {}\n    };\n    this.onFormSubmit = this.onFormSubmit.bind(this);\n    this.onFileChange = this.onFileChange.bind(this);\n  }\n\n  onFormSubmit(e) {\n    e.preventDefault(); // Stop form submit\n    // Ajout Citoyen\n\n    fetch(\"http://localhost:8080/Appli-Web/project/AddCitoyen\", {\n      method: \"post\",\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        civilite: this.state.civilite,\n        nom: this.state.nom,\n        prenom: this.state.prenom,\n        contact: null,\n        dateDeNaissance: this.state.datedenaisssance,\n        lieuDeNaissance: this.state.lieudenaissance,\n        nationalite: this.state.nationalite,\n        statut: this.state.statut\n      })\n    }).then(response => {\n      //Récupérer ID de citoyen.\n      const url = \"http://localhost:8080/Appli-Web/project/GetCitoyenId/\" + this.state.nom + \"/\" + this.state.prenom + \"/\" + this.state.datedenaisssance + \"/\" + this.state.lieudenaissance + \"/\" + this.state.nationalite;\n      fetch(url, {\n        method: \"get\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(response => response.json()).then(data => // Ajout de login de citoyen.\n      fetch(\"http://localhost:8080/Appli-Web/project/AddLogin\", {\n        method: \"post\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: this.state.email,\n          mdp: this.state.motdepasse,\n          type: \"CITOYEN\",\n          idLogin: data[0][\"id\"]\n        })\n      }).then(response => {//do something awesome that makes the world a better place\n      }));\n    });\n  }\n\n  componentDidMount() {\n    // Recuperer les informations de citoyen.\n    const id = 1;\n    const url = \"http://localhost:8080/Appli-Web/project/GetCitoyenById/\" + id;\n    fetch(url, {\n      method: \"get\",\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()).then(data => {\n      // Pré-remplir le formulaire\n      console.log(data);\n      this.setState({\n        userdata: data\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: this.onFormSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Demande de carte de s\\xE9jour\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Nom\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"nom\",\n          className: \"form-control\",\n          disabled: true,\n          value: this.state.userdata[\"nom\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Prenom\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"prenom\",\n          className: \"form-control\",\n          disabled: true,\n          value: this.state.userdata[\"prenom\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Date de naissance  \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          className: \"form-control\",\n          id: \"start\",\n          name: \"trip-start\",\n          disabled: true,\n          value: this.state.userdata[\"dateDeNaissance\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Lieu de naissance \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"lieudenaissance\",\n          className: \"form-control\",\n          disabled: true,\n          value: this.state.userdata[\"lieuDeNaissance\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Nationalit\\xE9 \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"nationalite\",\n          className: \"form-control\",\n          disabled: true,\n          value: this.state.userdata[\"nationalite\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Statut \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"statut\",\n          className: \"form-control\",\n          value: this.state.userdata[\"statut\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Adresse \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"adresse\",\n          className: \"form-control\",\n          value: this.state.userdata[\"adresse\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Revenu mensuel en Euro \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"revenumensuel\",\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Documents\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: this.onFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn   btn-primary btn-block\",\n        children: \"Envoyer la demande\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default DemandeCarte;","map":{"version":3,"sources":["/home/issam/Desktop/Projet React/try/src/DemandeCarte.js"],"names":["React","Component","DemandeCarte","constructor","props","onFileChange","event","setState","selectedFile","target","files","onFileUpload","formData","FormData","append","state","name","console","log","userdata","onFormSubmit","bind","e","preventDefault","fetch","method","headers","body","JSON","stringify","civilite","nom","prenom","contact","dateDeNaissance","datedenaisssance","lieuDeNaissance","lieudenaissance","nationalite","statut","then","response","url","json","data","email","mdp","motdepasse","type","idLogin","componentDidMount","id","render"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport './auth-css/auth.css';\n\nclass DemandeCarte extends Component {\n    constructor(props) {\n        super(props);\n        this.state ={\n            selectedFile:null,\n            userdata:{},\n        }\n        this.onFormSubmit = this.onFormSubmit.bind(this);\n        this.onFileChange = this.onFileChange.bind(this)\n    }\n    onFileChange = event => { \n        // Update the state \n        this.setState({ selectedFile: event.target.files[0] }); \n      }; \n    // On file upload (click the upload button) \n    onFileUpload = () => { \n        // Create an object of formData \n        const formData = new FormData(); \n        \n        // Update the formData object \n        formData.append( \n            \"fichier\", \n            this.state.selectedFile, \n            this.state.selectedFile.name \n        ); \n        \n        // Details of the uploaded file \n        console.log(this.state.selectedFile); \n        \n        // Request made to the backend api \n        // Send formData object \n        //fetch(\"api/uploadfile\", formData); \n        }; \n    onFormSubmit(e){\n        e.preventDefault() // Stop form submit\n\n        // Ajout Citoyen\n        fetch(\"http://localhost:8080/Appli-Web/project/AddCitoyen\", {\n        method: \"post\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          civilite:this.state.civilite,\n          nom:this.state.nom,\n          prenom:this.state.prenom,\n          contact:null,\n          dateDeNaissance:this.state.datedenaisssance,\n          lieuDeNaissance:this.state.lieudenaissance,\n          nationalite:this.state.nationalite,\n          statut:this.state.statut,\n\n        })\n        })\n        .then( (response) => { \n            //Récupérer ID de citoyen.\n            const url = \"http://localhost:8080/Appli-Web/project/GetCitoyenId/\"+this.state.nom+\"/\"+this.state.prenom+\"/\"+this.state.datedenaisssance+\"/\"+this.state.lieudenaissance+\"/\"+this.state.nationalite;\n            fetch(url, {\n                method:\"get\",\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            }).then(response => response.json()).then((data) => \n            // Ajout de login de citoyen.\n            fetch(\"http://localhost:8080/Appli-Web/project/AddLogin\", {\n            method: \"post\",\n            headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n            email:this.state.email,\n            mdp:this.state.motdepasse,\n            type:\"CITOYEN\",\n            idLogin:data[0][\"id\"]\n            })\n            })\n            .then( (response) => { \n                //do something awesome that makes the world a better place\n                \n            })\n            );\n        });\n    }\n    componentDidMount(){\n        // Recuperer les informations de citoyen.\n        const id = 1;\n        const url = \"http://localhost:8080/Appli-Web/project/GetCitoyenById/\"+id;\n        fetch(url, {\n        method: \"get\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }}).then(response => response.json()).then((data) => {\n            // Pré-remplir le formulaire\n            console.log(data);\n            this.setState({userdata: data});\n        });\n\n\n    }\n    render(){\n        return(\n            <form onSubmit={this.onFormSubmit}>\n                <h3>Demande de carte de séjour</h3>\n                <div className=\"form-group\">\n                    <label>Nom</label>\n                    <input type=\"text\" name=\"nom\" className=\"form-control\" disabled value={this.state.userdata[\"nom\"]}/>\n                </div>\n                <br></br>\n                <div className=\"form-group\">\n                    <label>Prenom</label>\n                    <input type=\"text\" name=\"prenom\" className=\"form-control\" disabled value={this.state.userdata[\"prenom\"]}/>\n                </div>\n                <br></br>\n                <div className=\"form-group\">\n                    <label>Date de naissance  </label>\n                    <input type=\"date\"  className=\"form-control\" id=\"start\" name=\"trip-start\"\n                            disabled\n                            value={this.state.userdata[\"dateDeNaissance\"]}\n                           />\n                </div>\n                <br></br>\n                <div className=\"form-group\">\n                <label>Lieu de naissance </label>\n                <input type=\"text\" name=\"lieudenaissance\" className=\"form-control\" disabled value={this.state.userdata[\"lieuDeNaissance\"]} />\n                </div>\n                <br></br>\n                <div className=\"form-group\">\n                <label>Nationalité </label>\n                <input type=\"text\" name=\"nationalite\" className=\"form-control\" disabled value={this.state.userdata[\"nationalite\"]}/>\n                </div>\n                <br></br>\n                <div className=\"form-group\">\n                <label>Statut </label>\n                <input type=\"text\" name=\"statut\" className=\"form-control\" value={this.state.userdata[\"statut\"]}/>\n                </div>\n                <br></br>\n                <div className=\"form-group\">\n                <label>Adresse </label>\n                <input type=\"text\" name=\"adresse\" className=\"form-control\" value={this.state.userdata[\"adresse\"]}/>\n                </div>\n                <br></br>\n                <div className=\"form-group\">\n                <label>Revenu mensuel en Euro </label>\n                <input type=\"text\" name=\"revenumensuel\" className=\"form-control\"/>\n                </div>\n                <br></br>\n                <div className=\"form-group\">\n                <label>Documents</label>\n                <input type=\"file\" onChange={this.onFileChange} /> \n\n                </div>\n                <br></br>\n                <button type=\"submit\" className=\"btn   btn-primary btn-block\">Envoyer la demande</button>\n                \n            </form>\n        )\n    }\n}\n\nexport default DemandeCarte;"]},"metadata":{},"sourceType":"module"}