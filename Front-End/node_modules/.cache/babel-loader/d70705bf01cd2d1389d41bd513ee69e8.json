{"ast":null,"code":"import _classCallCheck from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import'./auth-css/auth.css';import HeaderCitoyen from'./HeaderCitoyen';import history from'./history';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormulaireCandidature=/*#__PURE__*/function(_Component){_inherits(FormulaireCandidature,_Component);var _super=_createSuper(FormulaireCandidature);function FormulaireCandidature(props){var _this;_classCallCheck(this,FormulaireCandidature);_this=_super.call(this,props);_this.state={selectedFile:null,userdata:{},idCitoyen:1,idOffre:1};_this.onFormSubmit=_this.onFormSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(FormulaireCandidature,[{key:\"onFormSubmit\",value:function onFormSubmit(e){e.preventDefault();// Stop form submit\n// Traitement de candidature\nfetch(\"http://localhost:8080/Web-Project/project/AddCandidature\",{method:\"post\",headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({offre:{id:this.props.location.state.idOffre},citoyen:{id:this.state.idCitoyen},etat:\"nontraite\"})});history.push({pathname:\"/UploadCV\",state:{id:this.props.location.state.id,idCitoyen:this.state.idCitoyen,idOffre:this.props.location.state.idOffre}});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Recuperer les informations de citoyen.\nvar url=\"http://localhost:8080/Web-Project/project/GetLoginId/\"+this.props.location.state.id;fetch(url).then(function(res){return res.json();}).then(function(result){_this2.setState({idCitoyen:result[0][\"idLogin\"]});var url2=\"http://localhost:8080/Web-Project/project/GetCitoyenById/\"+result[0][\"idLogin\"];fetch(url2).then(function(res){return res.json();}).then(function(data){console.log(data);_this2.setState({userdata:data});},// Remarque : il est important de traiter les erreurs ici\n// au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n// des exceptions provenant de réels bugs du composant.\nfunction(error){});});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HeaderCitoyen,{id:this.props.location.state.id}),/*#__PURE__*/_jsx(\"hr\",{className:\"overall-separator\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onFormSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"carte-sejour\",children:\"Candidature \\xE0 l'offre\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nom\",className:\"form-control\",disabled:true,value:this.state.userdata[\"nom\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Prenom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"prenom\",className:\"form-control\",disabled:true,value:this.state.userdata[\"prenom\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date de naissance  \"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",id:\"start\",name:\"trip-start\",disabled:true,value:this.state.userdata[\"dateDeNaissance\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Lieu de naissance \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lieudenaissance\",className:\"form-control\",disabled:true,value:this.state.userdata[\"lieuDeNaissance\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nationalit\\xE9 \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nationalite\",className:\"form-control\",disabled:true,value:this.state.userdata[\"nationalite\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"E-mail \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",disabled:true,className:\"form-control\",value:this.props.location.state.id})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn   btn-primary btn-block\",children:\"Poursuivre la candidature\"}),/*#__PURE__*/_jsx(\"br\",{})]})]});}}]);return FormulaireCandidature;}(Component);export default FormulaireCandidature;","map":{"version":3,"sources":["/Users/badrsajid/Desktop/MonCitoyen/Front-End/src/FormulaireCandidature.js"],"names":["React","Component","HeaderCitoyen","history","FormulaireCandidature","props","state","selectedFile","userdata","idCitoyen","idOffre","onFormSubmit","bind","e","preventDefault","fetch","method","headers","body","JSON","stringify","offre","id","location","citoyen","etat","push","pathname","url","then","res","json","result","setState","url2","data","console","log","error"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport './auth-css/auth.css';\n\nimport HeaderCitoyen from './HeaderCitoyen';\nimport history from './history';\n\n\nclass FormulaireCandidature extends Component {\n\n\n    constructor(props) {\n        super(props);\n        this.state ={\n            selectedFile:null,\n            userdata:{},\n            idCitoyen: 1,\n            idOffre: 1,\n        }\n        this.onFormSubmit = this.onFormSubmit.bind(this);\n    }\n    onFormSubmit(e){\n        e.preventDefault() // Stop form submit\n        // Traitement de candidature\n        fetch(\"http://localhost:8080/Web-Project/project/AddCandidature\", {\n          method: \"post\",\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            offre: {id: this.props.location.state.idOffre},\n            citoyen: {id: this.state.idCitoyen},\n            etat: \"nontraite\",\n            })\n          });    \n          history.push({pathname: \"/UploadCV\",\n          state: {id: this.props.location.state.id, idCitoyen: this.state.idCitoyen, idOffre: this.props.location.state.idOffre}})\n    }\n\n\n    componentDidMount(){\n        // Recuperer les informations de citoyen.\n        const url = \"http://localhost:8080/Web-Project/project/GetLoginId/\"+this.props.location.state.id;\n\n        fetch(url).then(res => res.json()).then((result) => {\n          this.setState({idCitoyen: result[0][\"idLogin\"]});\n          const url2 = \"http://localhost:8080/Web-Project/project/GetCitoyenById/\"+result[0][\"idLogin\"];\n          fetch(url2)\n              .then(res => res.json())\n              .then(\n              (data) => {\n                console.log(data);\n                this.setState({userdata: data});\n              },\n              // Remarque : il est important de traiter les erreurs ici\n              // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n              // des exceptions provenant de réels bugs du composant.\n              (error) => {\n\n              }\n              )})\n\n    }\n\n    render(){\n        return(\n          <div>\n                <HeaderCitoyen id={this.props.location.state.id} />\n                <hr className=\"overall-separator\" />\n\n                <form onSubmit={this.onFormSubmit}>\n                    <h3 className=\"carte-sejour\">Candidature à l'offre</h3>\n                    <div className=\"form-group\">\n                        <label>Nom</label>\n                        <input type=\"text\" name=\"nom\" className=\"form-control\" disabled value={this.state.userdata[\"nom\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                        <label>Prenom</label>\n                        <input type=\"text\" name=\"prenom\" className=\"form-control\" disabled value={this.state.userdata[\"prenom\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                        <label>Date de naissance  </label>\n                        <input type=\"date\"  className=\"form-control\" id=\"start\" name=\"trip-start\"\n                                disabled\n                                value={this.state.userdata[\"dateDeNaissance\"]}\n                              />\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Lieu de naissance </label>\n                    <input type=\"text\" name=\"lieudenaissance\" className=\"form-control\" disabled value={this.state.userdata[\"lieuDeNaissance\"]} />\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Nationalité </label>\n                    <input type=\"text\" name=\"nationalite\" className=\"form-control\" disabled value={this.state.userdata[\"nationalite\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>E-mail </label>\n                    <input type=\"text\" name=\"email\" disabled className=\"form-control\" value={this.props.location.state.id}/>\n                    </div>\n                    <br></br>\n                    <button type=\"submit\" className=\"btn   btn-primary btn-block\">Poursuivre la candidature</button>\n                    <br></br>\n                    \n                </form>\n            </div>\n        )\n    }\n}\n\nexport default FormulaireCandidature;"]},"metadata":{},"sourceType":"module"}