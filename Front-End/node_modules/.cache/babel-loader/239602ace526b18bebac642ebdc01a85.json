{"ast":null,"code":"import _classCallCheck from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/badrsajid/Desktop/MonCitoyen/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import'./auth-css/auth.css';import HeaderCitoyen from'./HeaderCitoyen';import history from'./history';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DemandeImmatriculation=/*#__PURE__*/function(_Component){_inherits(DemandeImmatriculation,_Component);var _super=_createSuper(DemandeImmatriculation);function DemandeImmatriculation(props){var _this;_classCallCheck(this,DemandeImmatriculation);_this=_super.call(this,props);_this.onFileChange=function(event){// Update the state \n_this.setState({selectedFile:event.target.files[0]});};_this.onFileUpload=function(){// Create an object of formData \nvar formData=new FormData();// Update the formData object \nformData.append(\"fichier\",_this.state.selectedFile,_this.state.selectedFile.name);// Details of the uploaded file \nconsole.log(_this.state.selectedFile);// Request made to the backend api \n// Send formData object \n//fetch(\"api/uploadfile\", formData); \n};_this.state={selectedFile:null,userdata:{},civilite:\"\",nom:\"\",prenom:\"\",datedenaisssance:\"\",lieudenaissance:\"\",numeroImmatriculation:0,dateAchat:\"\",dateCertificat:\"\",dateImmatriculation1:\"\",numeroFormulaire:\"\",denominationCommerciale:\"\",typeVersion:\"\",numeroVehicule:\"\",genreNational:\"\",numeroExploitation:\"\",nuanceCouleur:\"\",couleurDominant:\"\",idCitoyen:1};_this.onFormSubmit=_this.onFormSubmit.bind(_assertThisInitialized(_this));_this.onFileChange=_this.onFileChange.bind(_assertThisInitialized(_this));return _this;}_createClass(DemandeImmatriculation,[{key:\"onFormSubmit\",value:function onFormSubmit(e){e.preventDefault();// Stop form submit\n// Ajout Citoyen\nfetch(\"http://localhost:8080/Web-Project/project/AddDemande\",{method:\"post\",headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({citoyen:{id:this.state.idCitoyen},typeDemande:\"immatriculation\",estTraite:\"false\",demandeImmatriculation:{genre:this.state.userdata[\"civilite\"],nom:this.state.userdata[\"nom\"],prenom:this.state.userdata[\"prenom\"],datedenaissance:this.state.userdata[\"dateDeNaissance\"],lieudenaissance:this.state.userdata[\"lieuDeNaissance\"],numeroImmatriculation:this.state.numeroImmatriculation,dateAchat:this.state.dateAchat,dateCertificat:this.state.dateCertificat,dateImmatriculation1:this.state.dateImmatriculation1,numeroFormulaire:this.state.numeroFormulaire,denominationCommerciale:this.state.denominationCommerciale,typeVersion:this.state.typeVersion,numeroVehicule:this.state.numeroVehicule,genreNational:this.state.genreNational,numeroExploitation:this.state.numeroExploitation,nuanceCouleur:this.state.nuanceCouleur,couleurDominant:this.state.couleurDominant}})});history.push({pathname:\"/UploadImmatriculation\",state:{id:this.props.location.state.id}});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Recuperer les informations de citoyen.\nvar url=\"http://localhost:8080/Web-Project/project/GetLoginId/\"+this.props.location.state.id;fetch(url).then(function(res){return res.json();}).then(function(result){_this2.setState({idCitoyen:result[0][\"idLogin\"]});var url2=\"http://localhost:8080/Web-Project/project/GetCitoyenById/\"+result[0][\"idLogin\"];fetch(url2).then(function(res){return res.json();}).then(function(data){console.log(data);_this2.setState({userdata:data});},// Remarque : il est important de traiter les erreurs ici\n// au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n// des exceptions provenant de réels bugs du composant.\nfunction(error){});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HeaderCitoyen,{id:this.props.location.state.id}),/*#__PURE__*/_jsx(\"hr\",{className:\"overall-separator\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onFormSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"carte-sejour\",children:\"Demande de passeport\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nom\",className:\"form-control\",disabled:true,value:this.state.userdata[\"nom\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Prenom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"prenom\",className:\"form-control\",disabled:true,value:this.state.userdata[\"prenom\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date de naissance  \"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",id:\"start\",name:\"trip-start\",disabled:true,value:this.state.userdata[\"dateDeNaissance\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Lieu de naissance \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lieudenaissance\",className:\"form-control\",disabled:true,value:this.state.userdata[\"lieuDeNaissance\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Numero d'immatriculation \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"dateAchat\",className:\"form-control\",onChange:function onChange(e){_this3.setState({numeroImmatriculation:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"dateAchat \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"dateAchat\",className:\"form-control\",onChange:function onChange(e){_this3.setState({dateAchat:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"dateCertificat \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"dateCertificat\",className:\"form-control\",onChange:function onChange(e){_this3.setState({dateCertificat:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"dateImmatriculation \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"dateImmatriculation1\",className:\"form-control\",onChange:function onChange(e){_this3.setState({dateImmatriculation1:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"numeroFormulaire \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"numeroFormulaire\",className:\"form-control\",onChange:function onChange(e){_this3.setState({numeroFormulaire:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"denominationCommerciale \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"denominationCommerciale\",className:\"form-control\",onChange:function onChange(e){_this3.setState({denominationCommerciale:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"typeVersion \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"typeVersion\",className:\"form-control\",onChange:function onChange(e){_this3.setState({typeVersion:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"numeroVehicule \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"numeroVehicule\",className:\"form-control\",onChange:function onChange(e){_this3.setState({numeroVehicule:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"genreNational \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"genreNational\",className:\"form-control\",onChange:function onChange(e){_this3.setState({genreNational:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"numeroExploitation \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"numeroExploitation\",className:\"form-control\",onChange:function onChange(e){_this3.setState({numeroExploitation:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"nuanceCouleur \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nuanceCouleur\",className:\"form-control\",onChange:function onChange(e){_this3.setState({nuanceCouleur:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"couleurDominant \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"couleurDominant\",className:\"form-control\",onChange:function onChange(e){_this3.setState({couleurDominant:e.target.value});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn   btn-primary btn-block\",children:\"Envoyer la demande\"})]})]});}}]);return DemandeImmatriculation;}(Component);export default DemandeImmatriculation;","map":{"version":3,"sources":["/Users/badrsajid/Desktop/MonCitoyen/Front-End/src/DemandeImmatriculation.js"],"names":["React","Component","HeaderCitoyen","history","DemandeImmatriculation","props","onFileChange","event","setState","selectedFile","target","files","onFileUpload","formData","FormData","append","state","name","console","log","userdata","civilite","nom","prenom","datedenaisssance","lieudenaissance","numeroImmatriculation","dateAchat","dateCertificat","dateImmatriculation1","numeroFormulaire","denominationCommerciale","typeVersion","numeroVehicule","genreNational","numeroExploitation","nuanceCouleur","couleurDominant","idCitoyen","onFormSubmit","bind","e","preventDefault","fetch","method","headers","body","JSON","stringify","citoyen","id","typeDemande","estTraite","demandeImmatriculation","genre","datedenaissance","push","pathname","location","url","then","res","json","result","url2","data","error","value"],"mappings":"ozBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAO,qBAAP,CAEA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,C,2FAGMC,CAAAA,sB,gIAGF,gCAAYC,KAAZ,CAAmB,wDACf,uBAAMA,KAAN,EADe,MA2BnBC,YA3BmB,CA2BJ,SAAAC,KAAK,CAAI,CACpB;AACA,MAAKC,QAAL,CAAc,CAAEC,YAAY,CAAEF,KAAK,CAACG,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAhB,CAAd,EACD,CA9BgB,OAgCnBC,YAhCmB,CAgCJ,UAAM,CACjB;AACA,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CAEA;AACAD,QAAQ,CAACE,MAAT,CACI,SADJ,CAEI,MAAKC,KAAL,CAAWP,YAFf,CAGI,MAAKO,KAAL,CAAWP,YAAX,CAAwBQ,IAH5B,EAMA;AACAC,OAAO,CAACC,GAAR,CAAY,MAAKH,KAAL,CAAWP,YAAvB,EAEA;AACA;AACA;AACC,CAjDc,CAEf,MAAKO,KAAL,CAAY,CACRP,YAAY,CAAC,IADL,CAERW,QAAQ,CAAC,EAFD,CAGRC,QAAQ,CAAC,EAHD,CAIRC,GAAG,CAAE,EAJG,CAKRC,MAAM,CAAE,EALA,CAMRC,gBAAgB,CAAE,EANV,CAORC,eAAe,CAAC,EAPR,CAQRC,qBAAqB,CAAE,CARf,CASRC,SAAS,CAAE,EATH,CAURC,cAAc,CAAE,EAVR,CAWRC,oBAAoB,CAAE,EAXd,CAYRC,gBAAgB,CAAE,EAZV,CAaRC,uBAAuB,CAAE,EAbjB,CAcRC,WAAW,CAAE,EAdL,CAeRC,cAAc,CAAE,EAfR,CAgBRC,aAAa,CAAE,EAhBP,CAiBRC,kBAAkB,CAAE,EAjBZ,CAkBRC,aAAa,CAAE,EAlBP,CAmBRC,eAAe,CAAE,EAnBT,CAoBRC,SAAS,CAAE,CApBH,CAAZ,CAsBA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB,CACA,MAAKlC,YAAL,CAAoB,MAAKA,YAAL,CAAkBkC,IAAlB,+BAApB,CAzBe,aA0BlB,C,+DAwBD,sBAAaC,CAAb,CAAe,CACXA,CAAC,CAACC,cAAF,GAAmB;AAET;AACVC,KAAK,CAAC,sDAAD,CAAyD,CAC5DC,MAAM,CAAE,MADoD,CAE5DC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAFmD,CAM5DC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,OAAO,CAAE,CAACC,EAAE,CAAE,KAAKlC,KAAL,CAAWsB,SAAhB,CADU,CAEnBa,WAAW,CAAE,iBAFM,CAGnBC,SAAS,CAAE,OAHQ,CAInBC,sBAAsB,CAAE,CACtBC,KAAK,CAAE,KAAKtC,KAAL,CAAWI,QAAX,CAAoB,UAApB,CADe,CAEtBE,GAAG,CAAE,KAAKN,KAAL,CAAWI,QAAX,CAAoB,KAApB,CAFiB,CAGtBG,MAAM,CAAE,KAAKP,KAAL,CAAWI,QAAX,CAAoB,QAApB,CAHc,CAItBmC,eAAe,CAAE,KAAKvC,KAAL,CAAWI,QAAX,CAAoB,iBAApB,CAJK,CAKtBK,eAAe,CAAE,KAAKT,KAAL,CAAWI,QAAX,CAAoB,iBAApB,CALK,CAMtBM,qBAAqB,CAAE,KAAKV,KAAL,CAAWU,qBANZ,CAOtBC,SAAS,CAAE,KAAKX,KAAL,CAAWW,SAPA,CAQtBC,cAAc,CAAE,KAAKZ,KAAL,CAAWY,cARL,CAStBC,oBAAoB,CAAE,KAAKb,KAAL,CAAWa,oBATX,CAUtBC,gBAAgB,CAAE,KAAKd,KAAL,CAAWc,gBAVP,CAWtBC,uBAAuB,CAAE,KAAKf,KAAL,CAAWe,uBAXd,CAYtBC,WAAW,CAAE,KAAKhB,KAAL,CAAWgB,WAZF,CAatBC,cAAc,CAAE,KAAKjB,KAAL,CAAWiB,cAbL,CActBC,aAAa,CAAE,KAAKlB,KAAL,CAAWkB,aAdJ,CAetBC,kBAAkB,CAAE,KAAKnB,KAAL,CAAWmB,kBAfT,CAgBtBC,aAAa,CAAE,KAAKpB,KAAL,CAAWoB,aAhBJ,CAiBtBC,eAAe,CAAE,KAAKrB,KAAL,CAAWqB,eAjBN,CAJL,CAAf,CANsD,CAAzD,CAAL,CAiCElC,OAAO,CAACqD,IAAR,CAAa,CAACC,QAAQ,CAAE,wBAAX,CACbzC,KAAK,CAAE,CAACkC,EAAE,CAAE,KAAK7C,KAAL,CAAWqD,QAAX,CAAoB1C,KAApB,CAA0BkC,EAA/B,CADM,CAAb,EAGL,C,iCAGD,4BAAmB,iBACf;AACA,GAAMS,CAAAA,GAAG,CAAG,wDAAwD,KAAKtD,KAAL,CAAWqD,QAAX,CAAoB1C,KAApB,CAA0BkC,EAA9F,CAEAP,KAAK,CAACgB,GAAD,CAAL,CAAWC,IAAX,CAAgB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAAnB,EAAmCF,IAAnC,CAAwC,SAACG,MAAD,CAAY,CAClD,MAAI,CAACvD,QAAL,CAAc,CAAC8B,SAAS,CAAEyB,MAAM,CAAC,CAAD,CAAN,CAAU,SAAV,CAAZ,CAAd,EACA,GAAMC,CAAAA,IAAI,CAAG,4DAA4DD,MAAM,CAAC,CAAD,CAAN,CAAU,SAAV,CAAzE,CACApB,KAAK,CAACqB,IAAD,CAAL,CACKJ,IADL,CACU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADb,EAEKF,IAFL,CAGI,SAACK,IAAD,CAAU,CACR/C,OAAO,CAACC,GAAR,CAAY8C,IAAZ,EACA,MAAI,CAACzD,QAAL,CAAc,CAACY,QAAQ,CAAE6C,IAAX,CAAd,EACD,CANL,CAOI;AACA;AACA;AACA,SAACC,KAAD,CAAW,CAEV,CAZL,EAaM,CAhBR,EAkBH,C,sBAED,iBAAQ,iBACJ,mBACE,oCACM,KAAC,aAAD,EAAe,EAAE,CAAE,KAAK7D,KAAL,CAAWqD,QAAX,CAAoB1C,KAApB,CAA0BkC,EAA7C,EADN,cAEM,WAAI,SAAS,CAAC,mBAAd,EAFN,cAIM,cAAM,QAAQ,CAAE,KAAKX,YAArB,wBACI,WAAI,SAAS,CAAC,cAAd,kCADJ,cAEI,aAAK,SAAS,CAAC,YAAf,wBACI,8BADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,KAAxB,CAA8B,SAAS,CAAC,cAAxC,CAAuD,QAAQ,KAA/D,CAAgE,KAAK,CAAE,KAAKvB,KAAL,CAAWI,QAAX,CAAoB,KAApB,CAAvE,EAFJ,GAFJ,cAMI,aANJ,cAOI,aAAK,SAAS,CAAC,YAAf,wBACI,iCADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,QAAxB,CAAiC,SAAS,CAAC,cAA3C,CAA0D,QAAQ,KAAlE,CAAmE,KAAK,CAAE,KAAKJ,KAAL,CAAWI,QAAX,CAAoB,QAApB,CAA1E,EAFJ,GAPJ,cAWI,aAXJ,cAYI,aAAK,SAAS,CAAC,YAAf,wBACI,8CADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAoB,SAAS,CAAC,cAA9B,CAA6C,EAAE,CAAC,OAAhD,CAAwD,IAAI,CAAC,YAA7D,CACQ,QAAQ,KADhB,CAEQ,KAAK,CAAE,KAAKJ,KAAL,CAAWI,QAAX,CAAoB,iBAApB,CAFf,EAFJ,GAZJ,cAmBI,aAnBJ,cAoBI,aAAK,SAAS,CAAC,YAAf,wBACA,6CADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,iBAAxB,CAA0C,SAAS,CAAC,cAApD,CAAmE,QAAQ,KAA3E,CAA4E,KAAK,CAAE,KAAKJ,KAAL,CAAWI,QAAX,CAAoB,iBAApB,CAAnF,EAFA,GApBJ,cAwBI,aAxBJ,cAyBI,aAAK,SAAS,CAAC,YAAf,wBACA,oDADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,WAAxB,CAAoC,SAAS,CAAC,cAA9C,CAA6D,QAAQ,CAAE,kBAACqB,CAAD,CAAO,CAAC,MAAI,CAACjC,QAAL,CAAc,CAACkB,qBAAqB,CAAEe,CAAC,CAAC/B,MAAF,CAASyD,KAAjC,CAAd,EAAuD,CAAtI,EAFA,GAzBJ,cA6BI,aA7BJ,cA8BI,aAAK,SAAS,CAAC,YAAf,wBACA,qCADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,WAAxB,CAAoC,SAAS,CAAC,cAA9C,CAA6D,QAAQ,CAAE,kBAAC1B,CAAD,CAAO,CAAC,MAAI,CAACjC,QAAL,CAAc,CAACmB,SAAS,CAAEc,CAAC,CAAC/B,MAAF,CAASyD,KAArB,CAAd,EAA2C,CAA1H,EAFA,GA9BJ,cAkCI,aAlCJ,cAmCI,aAAK,SAAS,CAAC,YAAf,wBACA,0CADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,gBAAxB,CAAyC,SAAS,CAAC,cAAnD,CAAkE,QAAQ,CAAE,kBAAC1B,CAAD,CAAO,CAAC,MAAI,CAACjC,QAAL,CAAc,CAACoB,cAAc,CAAEa,CAAC,CAAC/B,MAAF,CAASyD,KAA1B,CAAd,EAAgD,CAApI,EAFA,GAnCJ,cAuCI,aAvCJ,cAwCI,aAAK,SAAS,CAAC,YAAf,wBACA,+CADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,sBAAxB,CAA+C,SAAS,CAAC,cAAzD,CAAwE,QAAQ,CAAE,kBAAC1B,CAAD,CAAO,CAAC,MAAI,CAACjC,QAAL,CAAc,CAACqB,oBAAoB,CAAEY,CAAC,CAAC/B,MAAF,CAASyD,KAAhC,CAAd,EAAsD,CAAhJ,EAFA,GAxCJ,cA4CI,aA5CJ,cA8CI,aAAK,SAAS,CAAC,YAAf,wBACA,4CADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,kBAAxB,CAA2C,SAAS,CAAC,cAArD,CAAoE,QAAQ,CAAE,kBAAC1B,CAAD,CAAO,CAAC,MAAI,CAACjC,QAAL,CAAc,CAACsB,gBAAgB,CAAEW,CAAC,CAAC/B,MAAF,CAASyD,KAA5B,CAAd,EAAkD,CAAxI,EAFA,GA9CJ,cAkDI,aAlDJ,cAoDI,aAAK,SAAS,CAAC,YAAf,wBACA,mDADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,yBAAxB,CAAkD,SAAS,CAAC,cAA5D,CAA2E,QAAQ,CAAE,kBAAC1B,CAAD,CAAO,CAAC,MAAI,CAACjC,QAAL,CAAc,CAACuB,uBAAuB,CAAEU,CAAC,CAAC/B,MAAF,CAASyD,KAAnC,CAAd,EAAyD,CAAtJ,EAFA,GApDJ,cAwDI,aAxDJ,cA0DI,aAAK,SAAS,CAAC,YAAf,wBACA,uCADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,aAAxB,CAAsC,SAAS,CAAC,cAAhD,CAA+D,QAAQ,CAAE,kBAAC1B,CAAD,CAAO,CAAC,MAAI,CAACjC,QAAL,CAAc,CAACwB,WAAW,CAAES,CAAC,CAAC/B,MAAF,CAASyD,KAAvB,CAAd,EAA6C,CAA9H,EAFA,GA1DJ,cA8DI,aA9DJ,cAgEI,aAAK,SAAS,CAAC,YAAf,wBACA,0CADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,gBAAxB,CAAyC,SAAS,CAAC,cAAnD,CAAkE,QAAQ,CAAE,kBAAC1B,CAAD,CAAO,CAAC,MAAI,CAACjC,QAAL,CAAc,CAACyB,cAAc,CAAEQ,CAAC,CAAC/B,MAAF,CAASyD,KAA1B,CAAd,EAAgD,CAApI,EAFA,GAhEJ,cAoEI,aApEJ,cAsEI,aAAK,SAAS,CAAC,YAAf,wBACA,yCADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,eAAxB,CAAwC,SAAS,CAAC,cAAlD,CAAiE,QAAQ,CAAE,kBAAC1B,CAAD,CAAO,CAAC,MAAI,CAACjC,QAAL,CAAc,CAAC0B,aAAa,CAAEO,CAAC,CAAC/B,MAAF,CAASyD,KAAzB,CAAd,EAA+C,CAAlI,EAFA,GAtEJ,cA0EI,aA1EJ,cA4EI,aAAK,SAAS,CAAC,YAAf,wBACA,8CADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,oBAAxB,CAA6C,SAAS,CAAC,cAAvD,CAAsE,QAAQ,CAAE,kBAAC1B,CAAD,CAAO,CAAC,MAAI,CAACjC,QAAL,CAAc,CAAC2B,kBAAkB,CAAEM,CAAC,CAAC/B,MAAF,CAASyD,KAA9B,CAAd,EAAoD,CAA5I,EAFA,GA5EJ,cAgFI,aAhFJ,cAkFI,aAAK,SAAS,CAAC,YAAf,wBACA,yCADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,eAAxB,CAAwC,SAAS,CAAC,cAAlD,CAAiE,QAAQ,CAAE,kBAAC1B,CAAD,CAAO,CAAC,MAAI,CAACjC,QAAL,CAAc,CAAC4B,aAAa,CAAEK,CAAC,CAAC/B,MAAF,CAASyD,KAAzB,CAAd,EAA+C,CAAlI,EAFA,GAlFJ,cAsFI,aAtFJ,cAwFI,aAAK,SAAS,CAAC,YAAf,wBACA,2CADA,cAEA,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,iBAAxB,CAA0C,SAAS,CAAC,cAApD,CAAmE,QAAQ,CAAE,kBAAC1B,CAAD,CAAO,CAAC,MAAI,CAACjC,QAAL,CAAc,CAAC6B,eAAe,CAAEI,CAAC,CAAC/B,MAAF,CAASyD,KAA3B,CAAd,EAAiD,CAAtI,EAFA,GAxFJ,cA4FI,aA5FJ,cA8FI,aA9FJ,cA+FI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,6BAAhC,gCA/FJ,GAJN,GADF,CAyGH,C,oCAlOgClE,S,EAqOrC,cAAeG,CAAAA,sBAAf","sourcesContent":["import React, {Component} from \"react\";\nimport './auth-css/auth.css';\n\nimport HeaderCitoyen from './HeaderCitoyen';\nimport history from './history';\n\n\nclass DemandeImmatriculation extends Component {\n\n\n    constructor(props) {\n        super(props);\n        this.state ={\n            selectedFile:null,\n            userdata:{},\n            civilite:\"\",\n            nom: \"\",\n            prenom: \"\",\n            datedenaisssance: \"\",\n            lieudenaissance:\"\",\n            numeroImmatriculation: 0,\n            dateAchat: \"\",\n            dateCertificat: \"\",\n            dateImmatriculation1: \"\",\n            numeroFormulaire: \"\",\n            denominationCommerciale: \"\",\n            typeVersion: \"\",\n            numeroVehicule: \"\",\n            genreNational: \"\",\n            numeroExploitation: \"\",\n            nuanceCouleur: \"\",\n            couleurDominant: \"\",\n            idCitoyen: 1,\n        }\n        this.onFormSubmit = this.onFormSubmit.bind(this);\n        this.onFileChange = this.onFileChange.bind(this)\n    }\n    onFileChange = event => { \n        // Update the state \n        this.setState({ selectedFile: event.target.files[0] }); \n      }; \n    // On file upload (click the upload button) \n    onFileUpload = () => { \n        // Create an object of formData \n        const formData = new FormData(); \n        \n        // Update the formData object \n        formData.append( \n            \"fichier\", \n            this.state.selectedFile, \n            this.state.selectedFile.name \n        ); \n        \n        // Details of the uploaded file \n        console.log(this.state.selectedFile); \n        \n        // Request made to the backend api \n        // Send formData object \n        //fetch(\"api/uploadfile\", formData); \n        }; \n    onFormSubmit(e){\n        e.preventDefault() // Stop form submit\n\n                  // Ajout Citoyen\n        fetch(\"http://localhost:8080/Web-Project/project/AddDemande\", {\n          method: \"post\",\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            citoyen: {id: this.state.idCitoyen},\n            typeDemande: \"immatriculation\",\n            estTraite: \"false\",\n            demandeImmatriculation: {\n              genre: this.state.userdata[\"civilite\"],\n              nom: this.state.userdata[\"nom\"],\n              prenom: this.state.userdata[\"prenom\"],\n              datedenaissance: this.state.userdata[\"dateDeNaissance\"],\n              lieudenaissance: this.state.userdata[\"lieuDeNaissance\"],\n              numeroImmatriculation: this.state.numeroImmatriculation,\n              dateAchat: this.state.dateAchat,\n              dateCertificat: this.state.dateCertificat,\n              dateImmatriculation1: this.state.dateImmatriculation1,\n              numeroFormulaire: this.state.numeroFormulaire,\n              denominationCommerciale: this.state.denominationCommerciale,\n              typeVersion: this.state.typeVersion,\n              numeroVehicule: this.state.numeroVehicule,\n              genreNational: this.state.genreNational,\n              numeroExploitation: this.state.numeroExploitation,\n              nuanceCouleur: this.state.nuanceCouleur,\n              couleurDominant: this.state.couleurDominant,\n            }\n  \n  \n          })\n          });    \n          history.push({pathname: \"/UploadImmatriculation\",\n          state: {id: this.props.location.state.id}})\n\n    }\n\n\n    componentDidMount(){\n        // Recuperer les informations de citoyen.\n        const url = \"http://localhost:8080/Web-Project/project/GetLoginId/\"+this.props.location.state.id;\n\n        fetch(url).then(res => res.json()).then((result) => {\n          this.setState({idCitoyen: result[0][\"idLogin\"]});\n          const url2 = \"http://localhost:8080/Web-Project/project/GetCitoyenById/\"+result[0][\"idLogin\"];\n          fetch(url2)\n              .then(res => res.json())\n              .then(\n              (data) => {\n                console.log(data);\n                this.setState({userdata: data});\n              },\n              // Remarque : il est important de traiter les erreurs ici\n              // au lieu d'utiliser un bloc catch(), pour ne pas passer à la trappe\n              // des exceptions provenant de réels bugs du composant.\n              (error) => {\n\n              }\n              )})\n\n    }\n\n    render(){\n        return(\n          <div>\n                <HeaderCitoyen id={this.props.location.state.id} />\n                <hr className=\"overall-separator\" />\n\n                <form onSubmit={this.onFormSubmit}>\n                    <h3 className=\"carte-sejour\">Demande de passeport</h3>\n                    <div className=\"form-group\">\n                        <label>Nom</label>\n                        <input type=\"text\" name=\"nom\" className=\"form-control\" disabled value={this.state.userdata[\"nom\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                        <label>Prenom</label>\n                        <input type=\"text\" name=\"prenom\" className=\"form-control\" disabled value={this.state.userdata[\"prenom\"]}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                        <label>Date de naissance  </label>\n                        <input type=\"date\"  className=\"form-control\" id=\"start\" name=\"trip-start\"\n                                disabled\n                                value={this.state.userdata[\"dateDeNaissance\"]}\n                              />\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Lieu de naissance </label>\n                    <input type=\"text\" name=\"lieudenaissance\" className=\"form-control\" disabled value={this.state.userdata[\"lieuDeNaissance\"]} />\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>Numero d'immatriculation </label>\n                    <input type=\"text\" name=\"dateAchat\" className=\"form-control\" onChange={(e) => {this.setState({numeroImmatriculation: e.target.value})}}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>dateAchat </label>\n                    <input type=\"text\" name=\"dateAchat\" className=\"form-control\" onChange={(e) => {this.setState({dateAchat: e.target.value})}}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>dateCertificat </label>\n                    <input type=\"text\" name=\"dateCertificat\" className=\"form-control\" onChange={(e) => {this.setState({dateCertificat: e.target.value})}}/>\n                    </div>\n                    <br></br>\n                    <div className=\"form-group\">\n                    <label>dateImmatriculation </label>\n                    <input type=\"text\" name=\"dateImmatriculation1\" className=\"form-control\" onChange={(e) => {this.setState({dateImmatriculation1: e.target.value})}}/>\n                    </div>\n                    <br></br>\n\n                    <div className=\"form-group\">\n                    <label>numeroFormulaire </label>\n                    <input type=\"text\" name=\"numeroFormulaire\" className=\"form-control\" onChange={(e) => {this.setState({numeroFormulaire: e.target.value})}}/>\n                    </div>\n                    <br></br>\n\n                    <div className=\"form-group\">\n                    <label>denominationCommerciale </label>\n                    <input type=\"text\" name=\"denominationCommerciale\" className=\"form-control\" onChange={(e) => {this.setState({denominationCommerciale: e.target.value})}}/>\n                    </div>\n                    <br></br>\n\n                    <div className=\"form-group\">\n                    <label>typeVersion </label>\n                    <input type=\"text\" name=\"typeVersion\" className=\"form-control\" onChange={(e) => {this.setState({typeVersion: e.target.value})}}/>\n                    </div>\n                    <br></br>\n\n                    <div className=\"form-group\">\n                    <label>numeroVehicule </label>\n                    <input type=\"text\" name=\"numeroVehicule\" className=\"form-control\" onChange={(e) => {this.setState({numeroVehicule: e.target.value})}}/>\n                    </div>\n                    <br></br>\n\n                    <div className=\"form-group\">\n                    <label>genreNational </label>\n                    <input type=\"text\" name=\"genreNational\" className=\"form-control\" onChange={(e) => {this.setState({genreNational: e.target.value})}}/>\n                    </div>\n                    <br></br>\n\n                    <div className=\"form-group\">\n                    <label>numeroExploitation </label>\n                    <input type=\"text\" name=\"numeroExploitation\" className=\"form-control\" onChange={(e) => {this.setState({numeroExploitation: e.target.value})}}/>\n                    </div>\n                    <br></br>\n\n                    <div className=\"form-group\">\n                    <label>nuanceCouleur </label>\n                    <input type=\"text\" name=\"nuanceCouleur\" className=\"form-control\" onChange={(e) => {this.setState({nuanceCouleur: e.target.value})}}/>\n                    </div>\n                    <br></br>\n\n                    <div className=\"form-group\">\n                    <label>couleurDominant </label>\n                    <input type=\"text\" name=\"couleurDominant\" className=\"form-control\" onChange={(e) => {this.setState({couleurDominant: e.target.value})}}/>\n                    </div>\n                    <br></br>\n\n                    <br></br>\n                    <button type=\"submit\" className=\"btn   btn-primary btn-block\">Envoyer la demande</button>\n                    \n                </form>\n            </div>\n        )\n    }\n}\n\nexport default DemandeImmatriculation;"]},"metadata":{},"sourceType":"module"}